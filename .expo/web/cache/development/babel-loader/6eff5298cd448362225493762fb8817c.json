{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\heejun\\\\test0220\\\\screens\\\\HomeScreen.js\";\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { ApolloClient, InMemoryCache, useQuery, ApolloProvider } from \"@apollo/client\";\nimport { AuthContext, UserContext } from \"../components/context\";\nimport { SEE_REGIST_LECTURE, SEE_ALL_POST, POST_LOAD } from \"../queries\";\nimport { useIsFocused, useFocusEffect } from '@react-navigation/native';\nimport { Ionicons, EvilIcons } from '@expo/vector-icons';\nimport { WebView } from 'react-native-webview';\nimport { ScrollView } from 'react-native-gesture-handler';\nimport AsyncStorage from '@react-native-community/async-storage';\nimport * as Notifications from 'expo-notifications';\nimport * as WebBrowser from 'expo-web-browser';\nvar URI_LMS = \"https://future.seoultech.ac.kr/login/index.php\";\nvar URI_HOME = \"https://m-disciplinary.seoultech.ac.kr/\";\nvar URI_PORTAL = \"http://portal.seoultech.ac.kr/\";\nvar NOTIF_BOARD_ID = 6;\nvar STU_NOTIF_BOARD_ID = 8;\nvar NOW = new Date();\nvar TIMEZONE = NOW.getTimezoneOffset() * 60000;\nvar weekday = ['일', '월', '화', '수', '목', '금', '토'];\n\nfunction is_empty(obj) {\n  return Object.keys(obj).length === 0;\n}\n\nvar CardInfo = function CardInfo(_ref) {\n  var current_class = _ref.current_class;\n\n  if (current_class == undefined || current_class.start_time < NOW) {\n    var _NOW = new Date();\n\n    var _year = _NOW.getFullYear();\n\n    var _month = _NOW.getMonth() + 1;\n\n    var _date = _NOW.getDate();\n\n    var _day = weekday[_NOW.getDay()];\n\n    return React.createElement(View, {\n      style: styles.card,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: styles.date,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }\n    }, _year, \"\\uB144 \", _month, \"\\uC6D4 \", _date, \"\\uC77C \", _day, \"\\uC694\\uC77C\"), React.createElement(Text, {\n      style: styles.subject,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }\n    }, \" \\uD604\\uC7AC \\uC218\\uC5C5\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"));\n  }\n\n  var year = current_class.start_time.getFullYear();\n  var month = current_class.start_time.getMonth() + 1;\n  var date = current_class.start_time.getDate();\n  var day = weekday[current_class.start_time.getDay()];\n  var hours = current_class.start_time.getHours();\n  var minutes = current_class.start_time.getMinutes();\n  return React.createElement(View, {\n    style: styles.card,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.date,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, year, \"\\uB144 \", month, \"\\uC6D4 \", date, \"\\uC77C \", day, \"\\uC694\\uC77C\"), React.createElement(Text, {\n    style: styles.time,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, hours >= 10 ? hours : \"0\" + hours, \":\", minutes >= 10 ? minutes : \"0\" + minutes), React.createElement(Text, {\n    style: styles.subject,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, current_class.name), React.createElement(Text, {\n    style: styles.week,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, current_class.week, \"\\uC8FC\\uCC28\"), React.createElement(View, {\n    style: styles.where,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 3\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.location,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, \" \", current_class.vod ? \"VOD\" : \"SC\", \" \")), React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.location,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, \"|\")), React.createElement(View, {\n    style: {\n      flex: 3\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.location,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, current_class.room))));\n};\n\nvar CardInfo2 = function CardInfo2(_ref2) {\n  var next_class = _ref2.next_class;\n\n  if (next_class == undefined || next_class.start_time < NOW) {\n    return React.createElement(View, {\n      style: styles.card2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#787878\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, \"\\uC77C\\uC815\\uC774 \\uB354\\uC774\\uC0C1 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"));\n  }\n\n  var name = next_class.name;\n  var room = next_class.room;\n  var month = next_class.start_time.getMonth() + 1;\n  var date = next_class.start_time.getDate();\n  var day = weekday[next_class.start_time.getDay()];\n  var hours = next_class.start_time.getHours();\n  var minutes = next_class.start_time.getMinutes();\n  return React.createElement(View, {\n    style: styles.card2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"#787878\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, name, \" - \", month, \"\\uC6D4 \", date, \"\\uC77C \", hours >= 10 ? hours : \"0\" + hours, \":\", minutes >= 10 ? minutes : \"0\" + minutes, \" \", room, \" \"));\n};\n\nvar Notification = function Notification(_ref3) {\n  var navigation = _ref3.navigation,\n      bid = _ref3.bid;\n  var user = React.useContext(UserContext);\n\n  var _React$useState = React.useState(user.lastNotif),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      lastNotif = _React$useState2[0],\n      setLastNotif = _React$useState2[1];\n\n  setAsyncStorage = function setAsyncStorage() {\n    AsyncStorage.setItem(\"lastNotif\", lastNotif);\n  };\n\n  var _useQuery = useQuery(POST_LOAD, {\n    variables: {\n      bid: bid,\n      snum: 0,\n      tnum: 2\n    }\n  }),\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      data = _useQuery.data;\n\n  if (loading) {\n    return React.createElement(View, {\n      style: styles.card2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      color: \"#1478FF\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (data) {\n    var posts = data.loadPost;\n\n    if (posts.length == 0) {\n      return React.createElement(View, {\n        style: styles.card2,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: \"#787878\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }\n      }, \"\\uACF5\\uC9C0\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"));\n    }\n\n    AsyncStorage.getItem('notified', function (err, res) {\n      if (res == \"NO\") {\n        AsyncStorage.getItem('lastNotif', function (err, res) {\n          if (Number(res) < Number(posts[0].createdAt) || res == null) {\n            console.log(\"공지 알림 등록!\");\n            AsyncStorage.setItem('notified', \"YES\");\n            Notifications.scheduleNotificationAsync({\n              content: {\n                title: '새로운 공지 알림',\n                body: \"\\uC544\\uC9C1 \\uD655\\uC778\\uD558\\uC9C0 \\uC54A\\uC740 \\uC0C8\\uB85C\\uC6B4 \\uACF5\\uC9C0\\uAC00 \\uC788\\uC2B5\\uB2C8\\uB2E4. \" + posts[0].title,\n                sound: 'default'\n              },\n              trigger: null\n            });\n          }\n        });\n      }\n    });\n    return React.createElement(View, {\n      style: styles.card2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 7\n      }\n    }, posts.map(function (post, index) {\n      return React.createElement(TouchableOpacity, {\n        key: index,\n        style: styles.notificationList,\n        onPress: function onPress() {\n          AsyncStorage.getItem('lastNotif', function (err, res) {\n            console.log(\"res: \", res);\n\n            if (Number(res) < Number(post.createdAt)) {\n              AsyncStorage.setItem('lastNotif', post.createdAt, function () {\n                console.log(\"lastNotif:\" + post.createdAt + \" \\uC800\\uC7A5\\uC644\\uB8CC\");\n              });\n            }\n          });\n          navigation.navigate(\"Post\", {\n            id: post.id,\n            title: post.title,\n            text: post.text,\n            UserId: post.UserId,\n            Comment: post.Comment,\n            createdAt: post.createdAt,\n            fromhome: true,\n            User: {\n              name: post.User.name,\n              __typename: post.User.__typename\n            }\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: \"#787878\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }\n      }, post.title));\n    }));\n  }\n\n  if (error) {\n    return React.createElement(View, {\n      style: styles.card2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#787878\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }\n    }, \"\\uBD88\\uB7EC\\uC624\\uAE30 \\uC2E4\\uD328\"));\n  }\n};\n\nfunction Main(_ref4) {\n  var navigation = _ref4.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      result = _useState2[0],\n      setResult = _useState2[1];\n\n  var openLMS = function openLMS() {\n    var result;\n    return _regeneratorRuntime.async(function openLMS$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(WebBrowser.openBrowserAsync(URI_LMS));\n\n          case 2:\n            result = _context.sent;\n            setResult(result);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var openHOME = function openHOME() {\n    var result;\n    return _regeneratorRuntime.async(function openHOME$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(WebBrowser.openBrowserAsync(URI_HOME));\n\n          case 2:\n            result = _context2.sent;\n            setResult(result);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var openPORTAL = function openPORTAL() {\n    var result;\n    return _regeneratorRuntime.async(function openPORTAL$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(WebBrowser.openBrowserAsync(URI_PORTAL));\n\n          case 2:\n            result = _context3.sent;\n            setResult(result);\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var _useQuery2 = useQuery(SEE_REGIST_LECTURE),\n      loading = _useQuery2.loading,\n      error = _useQuery2.error,\n      data = _useQuery2.data;\n\n  if (error) {\n    console.log(\"error  : \", error);\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"#1478FF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }\n    }), React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }\n    }, error));\n  }\n\n  if (loading) {\n    console.log(\"loading...\");\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"#1478FF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (data) {\n    var lectures = data.seeRegistLecture;\n    var class_list = [{\n      start_time: new Date(null)\n    }];\n\n    for (var i = 0; i < lectures.length; i++) {\n      var num_of_classes = lectures[i].classes.length;\n\n      for (var j = 0; j < num_of_classes; j++) {\n        if (lectures[i].classes[j].VOD) continue;\n        var start_time = new Date(Number(lectures[i].classes[j].startTime) + TIMEZONE);\n        var end_time = new Date(Number(lectures[i].classes[j].endTime) + TIMEZONE);\n        var class_obj = {\n          name: lectures[i].name,\n          room: lectures[i].room,\n          start_time: start_time,\n          end_time: end_time,\n          week: lectures[i].classes[j].week,\n          vod: lectures[i].classes[j].VOD\n        };\n        class_list.push(class_obj);\n      }\n    }\n\n    if (class_list.length > 1) {\n      class_list.sort(function (a, b) {\n        return a.start_time.getTime() - b.start_time.getTime();\n      });\n    }\n\n    var current_class = 0;\n    var next_class = 0;\n    var now = new Date(Number(NOW));\n    console.log(\"now:\", now);\n\n    for (var _i = 0; _i < class_list.length; _i++) {\n      if (now <= class_list[_i].start_time) {\n        current_class = _i;\n        if (current_class + 1 < class_list.length) next_class = _i + 1;\n        break;\n      }\n    }\n\n    console.log(now);\n    console.log(class_list[current_class]);\n    console.log(class_list[next_class]);\n    return React.createElement(ScrollView, {\n      style: {\n        flex: 1\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 7\n      }\n    }, React.createElement(CardInfo, {\n      current_class: class_list[current_class],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 7\n      }\n    }), React.createElement(Text, {\n      style: {\n        textAlign: \"left\",\n        paddingLeft: 30,\n        fontWeight: \"700\",\n        paddingTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 7\n      }\n    }, \"\\uB2E4\\uC74C \\uC77C\\uC815\"), React.createElement(CardInfo2, {\n      next_class: class_list[next_class],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 7\n      }\n    }), React.createElement(Text, {\n      style: {\n        textAlign: \"left\",\n        paddingLeft: 30,\n        fontWeight: \"700\",\n        paddingTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }\n    }, \"\\uACF5\\uC9C0\\uC0AC\\uD56D\"), React.createElement(Notification, {\n      navigation: navigation,\n      bid: NOTIF_BOARD_ID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 7\n      }\n    }), React.createElement(Text, {\n      style: {\n        textAlign: \"left\",\n        paddingLeft: 30,\n        fontWeight: \"700\",\n        paddingTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }\n    }, \"\\uD559\\uC0DD\\uD68C \\uACF5\\uC9C0\\uC0AC\\uD56D\"), React.createElement(Notification, {\n      navigation: navigation,\n      bid: STU_NOTIF_BOARD_ID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 7\n      }\n    }), React.createElement(View, {\n      style: {\n        flex: 1,\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        marginHorizontal: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: styles.webview,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return openLMS();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }\n    }, React.createElement(Image, {\n      source: require(\"../assets/lms_link.png\"),\n      resizeMode: \"stretch\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 14\n      }\n    }), React.createElement(Text, {\n      style: styles.webviewText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 13\n      }\n    }, \"LMS\"))), React.createElement(View, {\n      style: styles.webview,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return openHOME();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }\n    }, React.createElement(Image, {\n      source: require(\"../assets/home_link.png\"),\n      resizeMode: \"stretch\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 14\n      }\n    }), React.createElement(Text, {\n      style: styles.webviewText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 13\n      }\n    }, \"\\uD559\\uAD50\\uD648\"))), React.createElement(View, {\n      style: styles.webview,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return openPORTAL();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }\n    }, React.createElement(Image, {\n      source: require(\"../assets/portal_link.png\"),\n      resizeMode: \"stretch\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 14\n      }\n    }), React.createElement(Text, {\n      style: styles.webviewText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 13\n      }\n    }, \"\\uB300\\uD559\\uD3EC\\uD138\")))));\n  }\n}\n\nexport default function HomeScreen(_ref5) {\n  var navigation = _ref5.navigation;\n  console.log(\"HomeScreen\");\n  var isFocused = useIsFocused();\n  var userInfo = React.useContext(UserContext);\n  var client = new ApolloClient({\n    uri: \"http://52.251.50.212:4000/\",\n    cache: new InMemoryCache(),\n    headers: {\n      Authorization: \"Bearer \" + userInfo.token\n    }\n  });\n\n  if (isFocused) {\n    return React.createElement(ApolloProvider, {\n      client: client,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 7\n      }\n    }, React.createElement(Main, {\n      navigation: navigation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }\n    }));\n  } else {\n    return React.createElement(View, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 7\n      }\n    });\n  }\n}\nvar styles = StyleSheet.create({\n  notificationTitle: {},\n  notificationList: {\n    flexDirection: \"row\",\n    padding: 3\n  },\n  adcard: {\n    marginVertical: 5,\n    borderRadius: 10,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  card2: {\n    backgroundColor: \"white\",\n    padding: 10,\n    marginVertical: 5,\n    marginHorizontal: 25,\n    borderWidth: 1,\n    borderColor: \"#dcdcdc\",\n    borderRadius: 10,\n    textAlign: \"center\",\n    justifyContent: \"center\"\n  },\n  card: {\n    backgroundColor: \"white\",\n    padding: 20,\n    margin: 25,\n    borderWidth: 1,\n    borderColor: \"#dcdcdc\",\n    borderRadius: 10,\n    textAlign: \"center\",\n    justifyContent: \"center\"\n  },\n  date: {\n    margin: 5,\n    color: \"blue\",\n    fontSize: 15,\n    borderColor: \"black\",\n    textAlign: \"center\",\n    justifyContent: \"center\"\n  },\n  time: {\n    margin: 5,\n    fontWeight: \"600\",\n    fontSize: 20,\n    textAlign: \"center\"\n  },\n  subject: {\n    textAlign: \"center\",\n    fontSize: 30,\n    fontWeight: \"600\"\n  },\n  location: {\n    textAlign: \"center\",\n    fontSize: 10,\n    color: \"#646464\"\n  },\n  week: {\n    margin: 5,\n    textAlign: \"center\",\n    fontSize: 10,\n    color: \"#646464\"\n  },\n  where: {\n    marginTop: 7,\n    padding: 3,\n    borderRadius: 10,\n    backgroundColor: \"#dcdcdc\",\n    alignSelf: \"center\",\n    fontSize: 10,\n    color: \"grey\",\n    flex: 1,\n    flexDirection: \"row\",\n    marginHorizontal: \"25%\"\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  webview: {\n    margin: 5,\n    padding: 5,\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  webviewText: {\n    textAlign: \"center\",\n    fontWeight: \"700\",\n    color: \"#323232\"\n  },\n  logo: {\n    width: 32,\n    height: 32\n  }\n});","map":{"version":3,"sources":["C:/Users/heejun/test0220/screens/HomeScreen.js"],"names":["React","useContext","useState","useEffect","ApolloClient","InMemoryCache","useQuery","ApolloProvider","AuthContext","UserContext","SEE_REGIST_LECTURE","SEE_ALL_POST","POST_LOAD","useIsFocused","useFocusEffect","Ionicons","EvilIcons","WebView","ScrollView","AsyncStorage","Notifications","WebBrowser","URI_LMS","URI_HOME","URI_PORTAL","NOTIF_BOARD_ID","STU_NOTIF_BOARD_ID","NOW","Date","TIMEZONE","getTimezoneOffset","weekday","is_empty","obj","Object","keys","length","CardInfo","current_class","undefined","start_time","year","getFullYear","month","getMonth","date","getDate","day","getDay","styles","card","subject","hours","getHours","minutes","getMinutes","time","name","week","where","flex","location","vod","room","CardInfo2","next_class","card2","color","Notification","navigation","bid","user","lastNotif","setLastNotif","setAsyncStorage","setItem","variables","snum","tnum","loading","error","data","posts","loadPost","getItem","err","res","Number","createdAt","console","log","scheduleNotificationAsync","content","title","body","sound","trigger","map","post","index","notificationList","navigate","id","text","UserId","Comment","fromhome","User","__typename","Main","result","setResult","openLMS","openBrowserAsync","openHOME","openPORTAL","justifyContent","alignItems","lectures","seeRegistLecture","class_list","i","num_of_classes","classes","j","VOD","startTime","end_time","endTime","class_obj","push","sort","a","b","getTime","now","textAlign","paddingLeft","fontWeight","paddingTop","flexDirection","marginHorizontal","webview","require","webviewText","HomeScreen","isFocused","userInfo","client","uri","cache","headers","Authorization","token","StyleSheet","create","notificationTitle","padding","adcard","marginVertical","borderRadius","backgroundColor","borderWidth","borderColor","margin","fontSize","marginTop","alignSelf","container","logo","width","height"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { StyleSheet, Text, View, Button, TouchableOpacity, ActivityIndicator, Image } from 'react-native';\r\nimport { ApolloClient, InMemoryCache, useQuery, ApolloProvider } from \"@apollo/client\";\r\nimport { AuthContext, UserContext } from '../components/context';\r\nimport { SEE_REGIST_LECTURE, SEE_ALL_POST, POST_LOAD } from '../queries';\r\nimport { useIsFocused, useFocusEffect } from '@react-navigation/native';\r\nimport { Ionicons, EvilIcons} from '@expo/vector-icons'; \r\nimport { WebView } from 'react-native-webview'\r\nimport { ScrollView } from 'react-native-gesture-handler';\r\nimport AsyncStorage from '@react-native-community/async-storage';\r\nimport * as Notifications from 'expo-notifications';\r\nimport * as WebBrowser from 'expo-web-browser';\r\n\r\nconst URI_LMS = \"https://future.seoultech.ac.kr/login/index.php\";\r\nconst URI_HOME  = \"https://m-disciplinary.seoultech.ac.kr/\";\r\nconst URI_PORTAL = \"http://portal.seoultech.ac.kr/\";\r\n\r\nconst NOTIF_BOARD_ID = 6 //공지사항 게시판 ID\r\nconst STU_NOTIF_BOARD_ID = 8 //학생회알림 게시판 ID\r\n\r\nconst NOW = new Date();\r\nconst TIMEZONE = NOW.getTimezoneOffset()*60000;\r\n\r\nconst weekday = ['일','월', '화', '수', '목', '금', '토'];\r\n\r\n// 객체가 비어있는지 확인하는 함수 \r\nfunction is_empty(obj) {\r\n  return Object.keys(obj).length === 0;\r\n}\r\n\r\n// 홈 탭에서 직후 일정 콤포넌트\r\nconst CardInfo = ({current_class}) => {\r\n  //console.log(\"current class at CardInfo: \", current_class);\r\n  // 더이상 수업이 없는 경우 처리\r\n  if (current_class == undefined || current_class.start_time < NOW){\r\n    const NOW = new Date();\r\n    let year = NOW.getFullYear();\r\n    let month = NOW.getMonth()+1;\r\n    let date = NOW.getDate();\r\n    let day = weekday[NOW.getDay()];\r\n    return (\r\n      <View style={styles.card}>\r\n        <Text style={styles.date}>{year}년 {month}월 {date}일 {day}요일</Text>\r\n        <Text style={styles.subject}> 현재 수업이 없습니다</Text>\r\n      </View>\r\n    )\r\n  }\r\n  // 현재 수업 데이터 전처리\r\n  let year = current_class.start_time.getFullYear();\r\n  let month = current_class.start_time.getMonth()+1;\r\n  let date = current_class.start_time.getDate();\r\n  let day = weekday[current_class.start_time.getDay()];\r\n  let hours = current_class.start_time.getHours();\r\n  let minutes = current_class.start_time.getMinutes();\r\n  \r\n\r\n  return (\r\n    <View style={styles.card}>\r\n      <Text style={styles.date}>{year}년 {month}월 {date}일 {day}요일</Text>\r\n      <Text style={styles.time}>{hours>=10? hours: `0${hours}`}:{minutes >= 10? minutes: `0${minutes}`}</Text>\r\n      <Text style={styles.subject}>{current_class.name}</Text>\r\n      <Text style={styles.week}>{current_class.week}주차</Text>\r\n      <View style={styles.where}>\r\n        <View style={{flex:3}}>\r\n          <Text style={styles.location}> {current_class.vod? \"VOD\":\"SC\"} </Text>\r\n        </View>\r\n        <View style={{flex:1}}>\r\n          <Text style={styles.location}>|</Text>\r\n        </View>\r\n        <View style={{flex:3}}>\r\n        <Text style={styles.location}>{current_class.room}</Text>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\n// 홈 탭에서 다음 일정 콤포넌트\r\nconst CardInfo2 = ({next_class}) => {\r\n  //console.log(\"next class in CardInfo2: \", next_class);\r\n  if (next_class == undefined || next_class.start_time < NOW){\r\n    return (\r\n      <View style={styles.card2}>\r\n        <Text style={{ color: \"#787878\" }}>일정이 더이상 없습니다.</Text>\r\n      </View>\r\n    )\r\n  }\r\n  let name = next_class.name;\r\n  let room = next_class.room;\r\n  let month = next_class.start_time.getMonth()+1;\r\n  let date = next_class.start_time.getDate();\r\n  let day = weekday[next_class.start_time.getDay()];\r\n  let hours = next_class.start_time.getHours();\r\n  let minutes = next_class.start_time.getMinutes();\r\n  return (\r\n    <View style={styles.card2}>\r\n      <Text style={{ color: \"#787878\" }}>{name} - {month}월 {date}일 {hours>=10? hours: `0${hours}`}:{minutes >= 10? minutes: `0${minutes}`} {room} </Text>\r\n    </View>\r\n  )\r\n}\r\n\r\n\r\nconst Notification = ({navigation, bid}) => {\r\n  const user = React.useContext(UserContext);\r\n  const [lastNotif, setLastNotif] = React.useState(user.lastNotif);\r\n  setAsyncStorage = () => {\r\n    AsyncStorage.setItem(\"lastNotif\", lastNotif);\r\n  }\r\n  /*\r\n  const setLastNotif = (current) =>{\r\n    let lastNotif = user.lastNotif;\r\n    console.log(lastNotif);\r\n    if (lastNotif == null){ // 마지막으로 읽은 공지가 없다?\r\n      try{\r\n        AsyncStorage.setItem(\"lastNotif\", current);\r\n      }catch(e){\r\n        console.log(e);\r\n      }\r\n    }\r\n    else{ // 마지막으로 읽은 공지가 있으면 비교해서 최근 것으로 대체\r\n      if(current > lastNotif){\r\n        AsyncStorage.setItem(\"lastNotif\", current);\r\n      }\r\n    }\r\n  }\r\n  */\r\n\r\n  const { loading, error, data } = useQuery(POST_LOAD,{\r\n    variables:{\r\n      bid: bid,\r\n      snum: 0,\r\n      tnum: 2,\r\n    }\r\n  });\r\n\r\n  //console.log(\"Notification loading: \",loading);\r\n  //console.log(\"Notification data   : \" , data);\r\n  //console.log(\"Notification error  : \", error );\r\n  \r\n\r\n  if(loading){\r\n    return(\r\n      <View style={styles.card2}>\r\n        <ActivityIndicator color=\"#1478FF\"/>\r\n      </View>\r\n    )\r\n  }\r\n  if(data){\r\n    let posts = data.loadPost;\r\n    //console.log(\"posts: \", posts);\r\n    if(posts.length==0){\r\n      return(\r\n        <View style={styles.card2}>\r\n          <Text style={{ color: \"#787878\" }}>공지가 없습니다</Text>\r\n        </View>\r\n      )\r\n    }\r\n    AsyncStorage.getItem('notified', (err,res)=>{\r\n      if (res==\"NO\"){\r\n        AsyncStorage.getItem('lastNotif', (err,res)=>{\r\n          if (Number(res) < Number(posts[0].createdAt) || res == null){\r\n            console.log(\"공지 알림 등록!\");\r\n            AsyncStorage.setItem('notified', \"YES\");\r\n            Notifications.scheduleNotificationAsync({\r\n              content:{\r\n                title: '새로운 공지 알림',\r\n                body: `아직 확인하지 않은 새로운 공지가 있습니다. ${posts[0].title}`,\r\n                sound: 'default'\r\n              },\r\n              trigger: null,\r\n            });\r\n          }\r\n        });\r\n      }\r\n    })\r\n\r\n    return (\r\n      <View style={styles.card2}>\r\n        {\r\n          posts.map((post, index)=>{\r\n            return(\r\n              <TouchableOpacity \r\n                key={index}\r\n                style={styles.notificationList} \r\n                onPress= {()=>{\r\n                  // 마지막으로 읽은 공지 최신화\r\n                  AsyncStorage.getItem('lastNotif', (err, res)=>{\r\n                    console.log(\"res: \",res);\r\n                    if( Number(res) < Number(post.createdAt)){\r\n                      AsyncStorage.setItem('lastNotif', post.createdAt, ()=>{\r\n                        console.log(`lastNotif:${post.createdAt} 저장완료`)\r\n                      });\r\n                    }\r\n                  });\r\n                  navigation.navigate(\"Post\",{\r\n                  id:post.id, \r\n                  title: post.title, \r\n                  text:post.text, \r\n                  UserId: post.UserId,\r\n                  Comment: post.Comment,\r\n                  createdAt: post.createdAt,\r\n                  fromhome : true,\r\n                  User:{\r\n                    name: post.User.name,\r\n                    __typename: post.User.__typename\r\n                  } \r\n                })}}>\r\n                <Text style={{ color: \"#787878\" }}>{post.title}</Text>\r\n              </TouchableOpacity>\r\n            )\r\n          })\r\n        }\r\n      </View>\r\n    )\r\n  }\r\n  if(error){\r\n    return(\r\n      <View style={styles.card2}>\r\n        <Text style={{ color: \"#787878\" }}>불러오기 실패</Text>\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nfunction Main({navigation}){\r\n  const [result, setResult] = useState(null);\r\n  const openLMS = async () => {\r\n    let result = await WebBrowser.openBrowserAsync(URI_LMS);\r\n    setResult(result);\r\n  };\r\n  const openHOME = async () => {\r\n    let result = await WebBrowser.openBrowserAsync(URI_HOME);\r\n    setResult(result);\r\n  };\r\n  const openPORTAL = async () => {\r\n    let result = await WebBrowser.openBrowserAsync(URI_PORTAL);\r\n    setResult(result);\r\n  };\r\n\r\n\r\n  // 강의 정보 받기.\r\n  const { loading, error, data } = useQuery(SEE_REGIST_LECTURE);\r\n\r\n  //console.log(\"loading: \",loading);\r\n  //console.log(\"data   : \" , data);\r\n  //console.log(\"error  : \", error );\r\n  \r\n\r\n  if(error){\r\n    console.log(\"error  : \", error );\r\n    return(\r\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n        <ActivityIndicator size=\"large\" color=\"#1478FF\" />\r\n        <Text>{error}</Text>\r\n      </View>\r\n    )\r\n  }\r\n  if(loading){\r\n    console.log(\"loading...\");\r\n    return (\r\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n        <ActivityIndicator size=\"large\" color=\"#1478FF\"/>\r\n      </View>\r\n    )    \r\n  }\r\n  if(data){\r\n    // 데이터 전처리. \r\n    let lectures = data.seeRegistLecture;\r\n    //console.log(\"length: \", lectures.length);\r\n    let class_list = [{\r\n      start_time: new Date(null)\r\n    }];\r\n    for(let i=0; i<lectures.length; i++){\r\n      let num_of_classes = lectures[i].classes.length;\r\n      for(let j=0; j<num_of_classes; j++){\r\n        if(lectures[i].classes[j].VOD) continue;\r\n        let start_time = new Date(Number(lectures[i].classes[j].startTime)+TIMEZONE);\r\n        //console.log(\"timezone offset: \", start_time.getTimezoneOffset());\r\n        let end_time = new Date(Number(lectures[i].classes[j].endTime)+TIMEZONE);\r\n        let class_obj = {\r\n          name: lectures[i].name,\r\n          room: lectures[i].room,\r\n          start_time: start_time,\r\n          end_time: end_time,\r\n          week: lectures[i].classes[j].week,\r\n          vod: lectures[i].classes[j].VOD\r\n        }\r\n        class_list.push(class_obj);\r\n      }\r\n    }\r\n    // 수업을 빠른 시간순으로 정렬 \r\n    if(class_list.length > 1){\r\n      class_list.sort((a,b)=>{\r\n        return a.start_time.getTime() - b.start_time.getTime();\r\n      })\r\n    } \r\n    //console.log(\"HomeScreen::Main::class_list: \",class_list);\r\n\r\n    // 현재 시간 포함 가장 가까운 수업을 찾는다.\r\n    let current_class = 0;\r\n    let next_class = 0;\r\n    let now = new Date(Number(NOW));                     \r\n    console.log(\"now:\",now);\r\n    for (let i=0; i<class_list.length; i++){\r\n      if (now <= class_list[i].start_time){\r\n        current_class = i;\r\n        if(current_class+1 < class_list.length) next_class = i+1;\r\n        break;\r\n      }\r\n    }\r\n    console.log(now)\r\n    console.log(class_list[current_class]);\r\n    console.log(class_list[next_class]);\r\n    return(\r\n      <ScrollView style={{flex:1}}>\r\n      <CardInfo current_class={class_list[current_class]}/>\r\n\r\n      <Text style={{ textAlign: \"left\", paddingLeft: 30, fontWeight: \"700\", paddingTop: 10 }}>다음 일정</Text>\r\n      \r\n      <CardInfo2 next_class={class_list[next_class]}/>\r\n        <Text style={{ textAlign: \"left\", paddingLeft: 30, fontWeight: \"700\", paddingTop: 10 }}>공지사항</Text>\r\n      <Notification navigation={navigation} bid={NOTIF_BOARD_ID}/>\r\n        <Text style={{ textAlign: \"left\", paddingLeft: 30, fontWeight: \"700\", paddingTop: 10 }}>학생회 공지사항</Text>\r\n      <Notification navigation={navigation} bid={STU_NOTIF_BOARD_ID}/>\r\n      <View style={{flex:1,flexDirection:\"row\", alignItems:\"center\", justifyContent:\"center\", marginHorizontal:20}}>\r\n        \r\n        <View style={styles.webview}>\r\n          <TouchableOpacity onPress={()=>openLMS()}>\r\n            {<Image source={require('../assets/lms_link.png')} resizeMode=\"stretch\"/>}\r\n            <Text style={styles.webviewText}>LMS</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n        <View style={styles.webview}>\r\n          <TouchableOpacity onPress={()=>openHOME()}>\r\n            {<Image source={require('../assets/home_link.png')} resizeMode=\"stretch\"/>}\r\n            <Text style={styles.webviewText}>학교홈</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n        <View style={styles.webview}>\r\n          <TouchableOpacity onPress={()=>openPORTAL()}>\r\n            {<Image source={require('../assets/portal_link.png')} resizeMode=\"stretch\"/>}\r\n            <Text style={styles.webviewText}>대학포털</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    </ScrollView>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\nexport default function HomeScreen({navigation}) {\r\n  console.log(\"HomeScreen\");\r\n  const isFocused = useIsFocused();\r\n  const userInfo = React.useContext(UserContext);\r\n  const client = new ApolloClient({\r\n    uri: \"http://52.251.50.212:4000/\",\r\n    cache: new InMemoryCache(),\r\n    headers: {\r\n      Authorization: `Bearer ${userInfo.token}`\r\n    }\r\n  });\r\n  /*\r\n  useFocusEffect(React.useCallback(()=>{\r\n    // 이곳에서 refetch\r\n    alert('SCREEN IS FOCUSED');\r\n    return()=>{\r\n      alert(\"SCREEN WAS UNFOCUSED\");\r\n    }\r\n  },[])\r\n  );\r\n  */\r\n  if(isFocused){\r\n    return (\r\n      <ApolloProvider client={client}>\r\n        <Main navigation={navigation}/>\r\n      </ApolloProvider>\r\n    )\r\n  }else{\r\n    return (\r\n      <View></View>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n  notificationTitle: {\r\n\r\n  },\r\n  notificationList: {\r\n    flexDirection: \"row\",\r\n    padding: 3,\r\n  },\r\n  adcard:{\r\n    marginVertical: 5,\r\n    borderRadius: 10,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  card2: {\r\n    backgroundColor: \"white\",\r\n    padding: 10,\r\n    marginVertical: 5,\r\n    marginHorizontal: 25,\r\n    borderWidth: 1,\r\n    borderColor: \"#dcdcdc\",\r\n    borderRadius: 10,\r\n    textAlign: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  card: {\r\n    backgroundColor: \"white\",\r\n    padding: 20,\r\n    margin: 25,\r\n    borderWidth: 1,\r\n    borderColor: \"#dcdcdc\",\r\n    borderRadius: 10,\r\n    textAlign: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  date: {\r\n    margin: 5,\r\n    color: \"blue\",\r\n    fontSize: 15,\r\n    borderColor: \"black\",\r\n    textAlign: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  time: {\r\n    margin: 5,\r\n    fontWeight: \"600\",\r\n    fontSize: 20,\r\n    textAlign: \"center\",\r\n  },\r\n  subject: {\r\n    textAlign: \"center\",\r\n    fontSize: 30,\r\n    fontWeight: \"600\",\r\n  },\r\n  location: {\r\n    textAlign: \"center\",\r\n    fontSize: 10,\r\n    color: \"#646464\",\r\n  },\r\n  week: {\r\n    margin: 5,\r\n    textAlign: \"center\",\r\n    fontSize: 10,\r\n    color: \"#646464\",\r\n  },\r\n  where: {\r\n    marginTop: 7,\r\n    padding: 3,\r\n    borderRadius: 10,\r\n    backgroundColor: \"#dcdcdc\",\r\n    alignSelf: \"center\",\r\n    fontSize: 10,\r\n    color: \"grey\",\r\n    flex:1,\r\n    flexDirection:\"row\",\r\n    marginHorizontal: \"25%\"\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  webview:{\r\n    margin: 5,\r\n    padding: 5,\r\n    flex: 1,\r\n    alignItems:\"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  webviewText:{\r\n    textAlign: \"center\",\r\n    fontWeight: \"700\",\r\n    color: \"#323232\"\r\n  },\r\n  logo:{\r\n    width: 32,\r\n    height: 32,\r\n  }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}