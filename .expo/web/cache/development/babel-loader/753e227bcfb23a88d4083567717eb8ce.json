{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\heejun\\\\test0220\\\\screens\\\\MainScreen.js\";\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Header } from 'react-native-elements';\nimport { ApolloClient, ApolloProvider, InMemoryCache, useQuery } from \"@apollo/client\";\nimport { GET_USERID } from \"../queries\";\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { Ionicons, EvilIcons, Entypo } from '@expo/vector-icons';\nimport { UserContext, IdContext } from \"../components/context\";\nimport AccountScreen from \"./AccountScreen\";\nimport HomeScreen from \"./HomeScreen\";\nimport { KeepScreen, KeepUpload } from \"./KeepScreen\";\nimport ScheduleStackScreen from \"./ScheduleStackScreen\";\nimport { Community, Post, Upload, UploadHeader, Search } from \"./MainContent\";\nimport { WebView } from 'react-native-webview';\nimport { useIsFocused, getFocusedRouteNameFromRoute } from '@react-navigation/native';\nimport { AdMobBanner, AdMobInterstitial } from 'expo-ads-admob';\nimport { SEE_BOARD } from \"../queries\";\nvar AD_ID_INTERS = Platform.OS === 'ios' ? \"ca-app-pub-8233357974153609/2214173566\" : \"ca-app-pub-8233357974153609/1707547735\";\nvar AD_ID_BANNER = Platform.OS === 'ios' ? \"ca-app-pub-8233357974153609/3291102463\" : \"ca-app-pub-8233357974153609/8459668669\";\nvar Tab = createBottomTabNavigator();\n\nvar areEqual = function areEqual(prevProps, nextProps) {\n  return JSON.stringify(prevProps.board.item) === JSON.stringify(nextProps.board.item) && prevProps.board.index === nextProps.board.index;\n};\n\nvar boardTouch = false;\nvar BoardItem = React.memo(function (_ref) {\n  var board = _ref.board,\n      navigation = _ref.navigation;\n  var update = useForceUpdate();\n  return React.createElement(TouchableOpacity, {\n    style: styles.card,\n    onPress: function onPress() {\n      boardTouch = true;\n      update();\n      navigation.navigate(\"Community\", {\n        id: board.item.id,\n        name: board.item.name,\n        type: board.item.type,\n        needquery: true\n      });\n    },\n    disabled: boardTouch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, board.item.name));\n}, areEqual);\n\nvar MoveBoard = function MoveBoard(_ref2) {\n  var navigation = _ref2.navigation;\n  boardTouch = false;\n\n  var _useQuery = useQuery(SEE_BOARD, {\n    fetchPolicy: \"no-cache\"\n  }),\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      data = _useQuery.data;\n\n  if (loading) return React.createElement(ActivityIndicator, {\n    color: \"#1478FF\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  });\n  if (error) return React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 19\n    }\n  }, \"\\uC5D0\\uB7EC!!\");\n  return React.createElement(FlatList, {\n    keyExtractor: function keyExtractor(board) {\n      return board.id.toString();\n    },\n    data: data.seeAllBoard,\n    renderItem: function renderItem(board) {\n      return React.createElement(BoardItem, {\n        board: board,\n        navigation: navigation,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 16\n        }\n      });\n    },\n    windowSize: 2,\n    onEndReached: function onEndReached() {},\n    onEndReachedThreshold: 0.1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  });\n};\n\nfunction useForceUpdate() {\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      setTick = _useState2[1];\n\n  var update = useCallback(function () {\n    setTick(function (tick) {\n      return tick + 1;\n    });\n  }, []);\n  return update;\n}\n\nvar MainContent = function MainContent(_ref3) {\n  var navigation = _ref3.navigation;\n  var update = useForceUpdate();\n  var userInfo = React.useContext(UserContext);\n  var client = new ApolloClient({\n    uri: \"http://52.251.50.212:4000/\",\n    cache: new InMemoryCache(),\n    headers: {\n      Authorization: \"Bearer \" + userInfo.token\n    }\n  });\n  useEffect(function () {\n    var unsubscribe = navigation.addListener('focus', function () {\n      update();\n    });\n    return unsubscribe;\n  }, [navigation]);\n  return React.createElement(ApolloProvider, {\n    client: client,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, React.createElement(MoveBoard, {\n    navigation: navigation,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar TwoLineText = function TwoLineText() {\n  return React.createElement(View, {\n    style: {\n      paddingTop: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: \"white\",\n      fontSize: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, \"\\uC11C\\uC6B8\\uACFC\\uD559\\uAE30\\uC220\\uB300\\uD559\\uAD50 \\uBBF8\\uB798\\uC735\\uD569\\uB300\\uD559\"), React.createElement(Text, {\n    style: {\n      color: \"white\",\n      fontSize: 21,\n      fontWeight: \"700\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, \"\\uD559\\uAD50\\uC0DD\\uD65C \\uB3C4\\uC6B0\\uBBF8\"));\n};\n\nvar Stack = createStackNavigator();\nvar URI_LMS = \"https://future.seoultech.ac.kr/login/index.php\";\nvar URI_HOME = \"https://m-disciplinary.seoultech.ac.kr/\";\nvar URI_PORTAL = \"http://portal.seoultech.ac.kr/\";\n\nvar WebviewLMS = function WebviewLMS() {\n  return React.createElement(WebView, {\n    source: {\n      uri: URI_LMS\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 10\n    }\n  });\n};\n\nvar WebviewHome = function WebviewHome() {\n  return React.createElement(WebView, {\n    source: {\n      uri: URI_HOME\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 10\n    }\n  });\n};\n\nvar WebviewPortal = function WebviewPortal() {\n  return React.createElement(WebView, {\n    source: {\n      uri: URI_PORTAL\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 10\n    }\n  });\n};\n\nexport default function MainScreen() {\n  var userInfo = React.useContext(UserContext);\n\n  var _useQuery2 = useQuery(GET_USERID, {\n    variables: {\n      email: userInfo.email\n    },\n    fetchPolicy: \"no-cache\"\n  }),\n      loading = _useQuery2.loading,\n      error = _useQuery2.error,\n      data = _useQuery2.data;\n\n  if (loading) return React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 5\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"#1478FF\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }));\n  if (error) return React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 20\n    }\n  }, \"\\uC5D0\\uB7EC!!\", error);\n  var id = data.findUserbyName[0].id;\n  var grade = data.findUserbyName[0].grade;\n\n  if (grade >= 2) {\n    AdMobInterstitial.setAdUnitID(AD_ID_INTERS).then(function () {\n      AdMobInterstitial.requestAdAsync().then(function () {\n        return AdMobInterstitial.showAdAsync();\n      });\n    });\n  }\n\n  var temp = {\n    id: id,\n    grade: grade\n  };\n  return React.createElement(IdContext.Provider, {\n    value: temp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }, React.createElement(Stack.Navigator, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, React.createElement(Stack.Screen, {\n    name: \"\\uD648\\uBBC0\\uB85C\",\n    component: DefaultScreen,\n    options: {\n      headerShown: false\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"Community\",\n    component: Community,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"Post\",\n    component: Post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"Upload\",\n    component: Upload,\n    options: {\n      headerShown: false\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"Search\",\n    component: Search,\n    options: {\n      headerShown: false\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"\\uACC4\\uC815\",\n    component: AccountScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"WebviewLMS\",\n    component: WebviewLMS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"WebviewHome\",\n    component: WebviewHome,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 11\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"WebviewPortal\",\n    component: WebviewPortal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"keepUpload\",\n    component: KeepUpload,\n    options: {\n      headerShown: false\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  })));\n}\nexport function DefaultScreen(_ref4) {\n  var _this2 = this;\n\n  var route = _ref4.route,\n      navigation = _ref4.navigation;\n  var user_meta = React.useContext(IdContext);\n  return React.createElement(React.Fragment, null, React.createElement(Header, {\n    placement: \"left\",\n    centerComponent: TwoLineText,\n    rightComponent: React.createElement(View, {\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 15\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: {\n        marginTop: 10\n      },\n      onPress: function onPress() {\n        navigation.navigate(\"계정\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, React.createElement(EvilIcons, {\n      name: \"user\",\n      size: 32,\n      color: \"white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 18\n      }\n    }))),\n    containerStyle: {\n      backgroundColor: '#0A6EFF'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }), user_meta.grade > 1 ? React.createElement(AdMobBanner, {\n    style: styles.adcard,\n    adUnitID: AD_ID_BANNER,\n    servePersonalizedAds: true,\n    onDidFailToReceiveAdWithError: this.bannerError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 15\n    }\n  }) : null, React.createElement(Tab.Navigator, {\n    screenOptions: function screenOptions(_ref5) {\n      var route = _ref5.route;\n      return {\n        tabBarIcon: function tabBarIcon(_ref6) {\n          var focused = _ref6.focused,\n              color = _ref6.color,\n              size = _ref6.size;\n          var iconName;\n\n          if (route.name === '홈') {\n            iconName = focused ? 'home' : 'home-outline';\n          } else if (route.name === '시간표') {\n            iconName = focused ? 'time' : 'time-outline';\n          } else if (route.name === '체크리스트') {\n            iconName = focused ? 'md-book' : 'md-book-outline';\n          } else if (route.name === '커뮤니티') {\n            iconName = focused ? 'chatbubbles' : 'chatbubbles-outline';\n          }\n\n          return React.createElement(Ionicons, {\n            name: iconName,\n            size: size,\n            color: color,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 24\n            }\n          });\n        }\n      };\n    },\n    tabBarOptions: {\n      activeTintColor: '#148CFF',\n      inactiveTintColor: '#dcdcdc',\n      labelPosition: 'below-icon'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, React.createElement(Tab.Screen, {\n    name: \"\\uD648\",\n    component: HomeScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }), React.createElement(Tab.Screen, {\n    name: \"\\uC2DC\\uAC04\\uD45C\",\n    component: ScheduleStackScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  }), React.createElement(Tab.Screen, {\n    name: \"\\uCCB4\\uD06C\\uB9AC\\uC2A4\\uD2B8\",\n    component: KeepScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }\n  }), React.createElement(Tab.Screen, {\n    name: \"\\uCEE4\\uBBA4\\uB2C8\\uD2F0\",\n    component: MainContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }\n  })));\n}\nvar styles = StyleSheet.create({\n  card2: {\n    padding: 10,\n    marginVertical: 5,\n    marginHorizontal: 25,\n    borderWidth: 1,\n    borderColor: \"#dcdcdc\",\n    borderRadius: 10,\n    textAlign: \"center\",\n    justifyContent: \"center\"\n  },\n  card: {\n    backgroundColor: \"white\",\n    padding: 10,\n    margin: 1,\n    borderWidth: 1,\n    borderColor: \"#dcdcdc\",\n    borderRadius: 5,\n    flexDirection: 'row'\n  },\n  date: {\n    margin: 5,\n    color: \"blue\",\n    fontSize: 15,\n    borderColor: \"black\",\n    textAlign: \"center\",\n    justifyContent: \"center\"\n  },\n  time: {\n    margin: 5,\n    fontWeight: \"600\",\n    fontSize: 20,\n    textAlign: \"center\"\n  },\n  subject: {\n    textAlign: \"center\",\n    fontSize: 30,\n    fontWeight: \"600\"\n  },\n  location: {\n    textAlign: \"center\",\n    fontSize: 10,\n    color: \"#646464\"\n  },\n  week: {\n    margin: 5,\n    textAlign: \"center\",\n    fontSize: 10,\n    color: \"#646464\"\n  },\n  where: {\n    marginTop: 7,\n    padding: 3,\n    borderRadius: 10,\n    backgroundColor: \"#dcdcdc\",\n    alignSelf: \"center\",\n    fontSize: 10,\n    color: \"grey\"\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  button: {\n    alignItems: \"center\",\n    backgroundColor: \"#DDDDDD\",\n    padding: 10\n  },\n  line: {\n    backgroundColor: \"#ffffff\",\n    borderBottomColor: 'black',\n    borderBottomWidth: 1\n  },\n  adButton: {\n    alignItems: 'center',\n    justifyContent: \"center\",\n    marginVertical: 10,\n    marginHorizontal: 50,\n    padding: 10,\n    borderRadius: 10,\n    backgroundColor: \"red\",\n    borderColor: \"white\"\n  },\n  adcard: {\n    marginVertical: 5,\n    borderRadius: 10,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"sources":["C:/Users/heejun/test0220/screens/MainScreen.js"],"names":["React","useState","useEffect","useCallback","Header","ApolloClient","ApolloProvider","InMemoryCache","useQuery","GET_USERID","createBottomTabNavigator","createStackNavigator","Ionicons","EvilIcons","Entypo","UserContext","IdContext","AccountScreen","HomeScreen","KeepScreen","KeepUpload","ScheduleStackScreen","Community","Post","Upload","UploadHeader","Search","WebView","useIsFocused","getFocusedRouteNameFromRoute","AdMobBanner","AdMobInterstitial","SEE_BOARD","AD_ID_INTERS","Platform","OS","AD_ID_BANNER","Tab","areEqual","prevProps","nextProps","JSON","stringify","board","item","index","boardTouch","BoardItem","memo","navigation","update","useForceUpdate","styles","card","navigate","id","name","type","needquery","fontSize","MoveBoard","fetchPolicy","loading","error","data","toString","seeAllBoard","setTick","tick","MainContent","userInfo","useContext","client","uri","cache","headers","Authorization","token","unsubscribe","addListener","TwoLineText","paddingTop","color","fontWeight","Stack","URI_LMS","URI_HOME","URI_PORTAL","WebviewLMS","WebviewHome","WebviewPortal","MainScreen","variables","email","flex","justifyContent","alignItems","findUserbyName","grade","setAdUnitID","then","requestAdAsync","showAdAsync","temp","DefaultScreen","headerShown","route","user_meta","flexDirection","marginTop","backgroundColor","adcard","bannerError","tabBarIcon","focused","size","iconName","activeTintColor","inactiveTintColor","labelPosition","StyleSheet","create","card2","padding","marginVertical","marginHorizontal","borderWidth","borderColor","borderRadius","textAlign","margin","date","time","subject","location","week","where","alignSelf","container","button","line","borderBottomColor","borderBottomWidth","adButton"],"mappings":"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","sourcesContent":["import React, { useState, useEffect,useCallback } from 'react';\r\nimport { StyleSheet, Text, View, Modal, TouchableOpacity, ActivityIndicator,FlatList, Platform } from 'react-native';\r\nimport {Header} from 'react-native-elements';\r\nimport { ApolloClient, ApolloProvider, InMemoryCache, useQuery } from \"@apollo/client\";\r\n\r\nimport { GET_USERID } from \"../queries\";\r\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\r\nimport { createStackNavigator } from '@react-navigation/stack';\r\nimport { Ionicons, EvilIcons,Entypo } from '@expo/vector-icons';\r\n\r\nimport { UserContext,IdContext } from '../components/context';\r\n \r\nimport AccountScreen from './AccountScreen';\r\nimport HomeScreen from './HomeScreen';\r\nimport {KeepScreen, KeepUpload} from './KeepScreen';\r\nimport ScheduleStackScreen from './ScheduleStackScreen';\r\nimport {Community,Post,Upload,UploadHeader,Search}from \"./MainContent\"\r\n\r\nimport { WebView } from 'react-native-webview';\r\nimport { useIsFocused,getFocusedRouteNameFromRoute } from '@react-navigation/native'\r\nimport {\r\n  AdMobBanner,\r\n  AdMobInterstitial,\r\n} from 'expo-ads-admob';\r\n\r\nimport {SEE_BOARD} from '../queries'\r\n\r\nconst AD_ID_INTERS = Platform.OS === 'ios'? \"ca-app-pub-8233357974153609/2214173566\" : \"ca-app-pub-8233357974153609/1707547735\"\r\nconst AD_ID_BANNER = Platform.OS === 'ios'? \"ca-app-pub-8233357974153609/3291102463\" : \"ca-app-pub-8233357974153609/8459668669\"\r\n\r\nconst Tab = createBottomTabNavigator();\r\n \r\nconst areEqual = (prevProps, nextProps) => {\r\n  //console.log(\"areequal!!!!!!!!!!!!!!!!1\",nextProps.memo.index, JSON.stringify(prevProps.memo.item.checklist),JSON.stringify(nextProps.memo.item.checklist))\r\n  return (JSON.stringify(prevProps.board.item) === JSON.stringify(nextProps.board.item)\r\n  &&\r\n  prevProps.board.index === nextProps.board.index\r\n  );\r\n  \r\n}   \r\n\r\nvar boardTouch = false;\r\nconst BoardItem = React.memo(({board,navigation})=>{ \r\n  //console.log(\"어슈발뭐지??\",boardTouch);\r\n  const update = useForceUpdate();\r\n    return (\r\n      <TouchableOpacity  style={styles.card}\r\n      onPress={()=>{\r\n        boardTouch = true;\r\n        update();\r\n        navigation.navigate(\"Community\",{id: board.item.id, name:board.item.name,\r\n        type:board.item.type,needquery:true})}}\r\n      disabled={boardTouch}\r\n      >\r\n      \r\n        <Text style={{fontSize:20}}>{board.item.name}</Text>\r\n      </TouchableOpacity>\r\n  );\r\n    },areEqual)\r\n\r\nconst MoveBoard = ({navigation})=>{ //추가\r\n  boardTouch = false;\r\n  const {loading, error, data} = useQuery(SEE_BOARD,{\r\n    fetchPolicy: \"no-cache\"\r\n  });\r\n  if(loading)return <ActivityIndicator color=\"#1478FF\"/>\r\n  if(error)return <Text>에러!!</Text>\r\n  //console.log(data)\r\n  return (\r\n    <FlatList\r\n      keyExtractor={(board) => board.id.toString()}\r\n      data = {data.seeAllBoard} \r\n      renderItem ={(board)=>{\r\n        return <BoardItem board={board} navigation={navigation}/>\r\n      }}\r\n      windowSize = {2}\r\n      onEndReached={()=>{//console.log(\"끝!!\");\r\n\r\n    }}\r\n \r\n   onEndReachedThreshold={0.1}\r\n      />\r\n  );\r\n\r\n}\r\n  \r\nfunction useForceUpdate() {\r\n  const [, setTick] = useState(0);\r\n  const update = useCallback(() => {\r\n    setTick(tick => tick + 1);\r\n  }, [])\r\n  return update;\r\n}\r\n\r\nconst MainContent = ({navigation}) => {//변경\r\n  const update = useForceUpdate();\r\n  const userInfo = React.useContext(UserContext);\r\n  const client = new ApolloClient({\r\n    uri: \"http://52.251.50.212:4000/\",\r\n    cache: new InMemoryCache(),\r\n    headers: { \r\n       Authorization: `Bearer ${userInfo.token}`\r\n      },\r\n  })\r\n  useEffect(()=>{\r\n    const unsubscribe = navigation.addListener('focus', () => {\r\n      update();\r\n    });\r\n    return unsubscribe;\r\n  },[navigation])\r\n\r\n  return(\r\n    <ApolloProvider client = {client}>\r\n      <MoveBoard navigation={navigation}/>\r\n  </ApolloProvider>\r\n  );\r\n\r\n}\r\nconst TwoLineText = () =>{\r\n    return(\r\n      <View style={{paddingTop:10}}>\r\n        <Text style={{color:\"white\", fontSize:10 }}>서울과학기술대학교 미래융합대학</Text>\r\n        <Text style={{color:\"white\", fontSize:21, fontWeight:\"700\"}}>학교생활 도우미</Text>\r\n      </View>\r\n    )\r\n  }\r\n\r\n  const Stack =createStackNavigator();\r\n \r\n\r\n\r\n\r\nconst URI_LMS = \"https://future.seoultech.ac.kr/login/index.php\";\r\nconst URI_HOME  = \"https://m-disciplinary.seoultech.ac.kr/\";\r\nconst URI_PORTAL = \"http://portal.seoultech.ac.kr/\";\r\n\r\n\r\nconst WebviewLMS = ()=>{\r\n  return <WebView source={{uri:URI_LMS}}/>\r\n}\r\nconst WebviewHome = ()=>{\r\n  return <WebView source={{uri:URI_HOME}}/>\r\n}\r\nconst WebviewPortal = ()=>{\r\n  return <WebView source={{uri:URI_PORTAL}}/>\r\n}\r\n\r\nexport default function MainScreen(){\r\n  const userInfo = React.useContext(UserContext);\r\n  const{loading, error, data} = useQuery(GET_USERID,{\r\n    variables: {email: userInfo.email},\r\n    fetchPolicy:\"no-cache\" \r\n  })  \r\n\r\n  if(loading) return (\r\n    <View style={{flex:1, justifyContent:\"center\", alignItems:\"center\"}}>\r\n      <ActivityIndicator size=\"large\" color=\"#1478FF\"/>\r\n    </View>\r\n  );\r\n  if(error) return(<Text>에러!!{error}</Text>);\r\n  let id = data.findUserbyName[0].id\r\n  let grade = data.findUserbyName[0].grade\r\n  if(grade >= 2){\r\n    AdMobInterstitial.setAdUnitID(AD_ID_INTERS).then(()=>{\r\n      AdMobInterstitial.requestAdAsync().then(()=>AdMobInterstitial.showAdAsync());\r\n    });\r\n  }\r\n  const temp ={id: id, grade: grade} \r\n    //console.log(\"temp\",temp);\r\n      return ( \r\n        <IdContext.Provider value = {temp} >\r\n\r\n        <Stack.Navigator>\r\n          <Stack.Screen name=\"홈므로\" component={DefaultScreen} options={{headerShown: false}}/>\r\n          <Stack.Screen name=\"Community\" component={Community} />\r\n          <Stack.Screen name=\"Post\" component={Post} /> \r\n          <Stack.Screen name=\"Upload\" component={Upload} options={{headerShown: false}} />\r\n          <Stack.Screen name=\"Search\" component={Search} options={{headerShown: false}} />\r\n          <Stack.Screen name=\"계정\" component={AccountScreen}/>\r\n          <Stack.Screen name=\"WebviewLMS\" component={WebviewLMS}/>\r\n          <Stack.Screen name=\"WebviewHome\" component={WebviewHome}/>\r\n          <Stack.Screen name=\"WebviewPortal\" component={WebviewPortal}/>\r\n          <Stack.Screen name=\"keepUpload\" component={KeepUpload} options={{headerShown: false} }/>\r\n         </Stack.Navigator>\r\n         </IdContext.Provider>\r\n    );\r\n  }\r\n\r\n\r\n\r\nexport function DefaultScreen({route,navigation}) {\r\n    const user_meta = React.useContext(IdContext);\r\n    //const routeName = getFocusedRouteNameFromRoute(route)\r\n   // console.log(\"Default11!1!!!!!!!!!!!!!!!!!!!1\",routeName)\r\n    return (\r\n        <>\r\n          {\r\n            //user_meta.grade > 1? showInterstitial():null\r\n          }\r\n          <Header\r\n            placement=\"left\"\r\n            centerComponent={TwoLineText}\r\n            rightComponent={\r\n              <View style={{flexDirection:\"row\"}}>\r\n                <TouchableOpacity \r\n                  style={{marginTop:10}}\r\n                  onPress= {()=>{navigation.navigate(\"계정\")}}\r\n                ><EvilIcons name=\"user\" size={32} color=\"white\"/>\r\n                </TouchableOpacity>\r\n              </View>\r\n\r\n            }\r\n            containerStyle={{\r\n              backgroundColor: '#0A6EFF'\r\n            }}\r\n          />\r\n            {\r\n              user_meta.grade>1?\r\n              <AdMobBanner\r\n                style={styles.adcard}\r\n                adUnitID={AD_ID_BANNER} // Test ID, Replace with your-admob-unit-id\r\n                servePersonalizedAds // true or false\r\n                onDidFailToReceiveAdWithError={this.bannerError} \r\n              />\r\n              :\r\n              null\r\n            }\r\n\r\n \r\n          <Tab.Navigator\r\n            \r\n            screenOptions={({ route }) => ({\r\n              tabBarIcon: ({ focused, color, size }) => {\r\n                let iconName;\r\n  \r\n                if (route.name === '홈') {\r\n                  iconName = focused ? 'home' : 'home-outline';\r\n                } else if (route.name === '시간표') {\r\n                  iconName = focused ? 'time' : 'time-outline';\r\n                } else if (route.name === '체크리스트') {\r\n                  iconName = focused ? 'md-book' : 'md-book-outline';\r\n                } else if (route.name === '커뮤니티') {\r\n                  iconName = focused ? 'chatbubbles' : 'chatbubbles-outline';\r\n                }\r\n   \r\n                // You can return any component that you like here!\r\n                return <Ionicons name={iconName} size={size} color={color} />;\r\n              },\r\n            })}\r\n            tabBarOptions={{\r\n              activeTintColor: '#148CFF',\r\n              inactiveTintColor: '#dcdcdc',\r\n              labelPosition: 'below-icon'\r\n            }}\r\n            \r\n          >\r\n            <Tab.Screen name=\"홈\" component={HomeScreen} />\r\n            <Tab.Screen name=\"시간표\" component={ScheduleStackScreen} />\r\n            <Tab.Screen name=\"체크리스트\" component={KeepScreen} />\r\n            <Tab.Screen name=\"커뮤니티\" component={MainContent} />\r\n          </Tab.Navigator>\r\n        </>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    card2: {\r\n      padding: 10,\r\n      marginVertical: 5,\r\n      marginHorizontal: 25,\r\n      borderWidth: 1,\r\n      borderColor: \"#dcdcdc\",\r\n      borderRadius: 10,\r\n      textAlign: \"center\",\r\n      justifyContent: \"center\",\r\n    },\r\n    card: { //card자체수정\r\n      backgroundColor: \"white\",\r\n      padding: 10,\r\n      margin: 1,\r\n      borderWidth: 1,\r\n      borderColor: \"#dcdcdc\",\r\n      borderRadius: 5,\r\n      flexDirection: 'row' \r\n    },\r\n    date: {\r\n      margin: 5,\r\n      color: \"blue\",\r\n      fontSize: 15,\r\n      borderColor: \"black\",\r\n      textAlign: \"center\",\r\n      justifyContent: \"center\",\r\n    },\r\n    time: {\r\n      margin: 5,\r\n      fontWeight: \"600\",\r\n      fontSize: 20,\r\n      textAlign: \"center\",\r\n    },\r\n    subject: {\r\n      textAlign: \"center\",\r\n      fontSize: 30,\r\n      fontWeight: \"600\",\r\n    },\r\n    location: {\r\n      textAlign: \"center\",\r\n      fontSize: 10,\r\n      color: \"#646464\",\r\n    },\r\n    week: {\r\n      margin: 5,\r\n      textAlign: \"center\",\r\n      fontSize: 10,\r\n      color: \"#646464\",\r\n    },\r\n    where: {\r\n      marginTop: 7,\r\n      padding: 3,\r\n      borderRadius: 10,\r\n      backgroundColor: \"#dcdcdc\",\r\n      alignSelf: \"center\",\r\n      fontSize: 10,\r\n      color: \"grey\",\r\n    },\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: '#fff',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n    },\r\n    button: {\r\n      alignItems: \"center\",\r\n      backgroundColor: \"#DDDDDD\",\r\n      padding: 10\r\n    }, \r\n    line: {\r\n      backgroundColor: \"#ffffff\",\r\n      borderBottomColor: 'black',\r\n      borderBottomWidth: 1,\r\n    },\r\n    adButton: {\r\n      alignItems: 'center',\r\n      justifyContent: \"center\",\r\n      marginVertical: 10,\r\n      marginHorizontal: 50,\r\n      //borderStyle:\"dashed\", \r\n      //borderWidth:1,\r\n      padding:10,\r\n      borderRadius: 10,\r\n      backgroundColor: \"red\",\r\n      borderColor: \"white\"\r\n    },\r\n    adcard:{\r\n      marginVertical: 5,\r\n      borderRadius: 10,\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n    },\r\n  });"]},"metadata":{},"sourceType":"module"}