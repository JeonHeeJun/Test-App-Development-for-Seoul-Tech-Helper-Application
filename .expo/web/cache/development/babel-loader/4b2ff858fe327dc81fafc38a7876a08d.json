{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\heejun\\\\test0220\\\\screens\\\\ScheduleScreen.js\";\n\nimport React from 'react';\nimport { IdContext, UserContext } from \"../components/context\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { ApolloClient, InMemoryCache, useQuery, ApolloProvider } from \"@apollo/client\";\nimport { SEE_REGIST_LECTURE, GET_START_DATE } from \"../queries\";\nimport { useFocusEffect, useIsFocused } from '@react-navigation/native';\nimport { AdMobInterstitial } from 'expo-ads-admob';\nvar AD_ID = Platform.OS === 'ios' ? \"ca-app-pub-8233357974153609/2214173566\" : \"ca-app-pub-8233357974153609/1707547735\";\nvar colors = [\"#AFFFEE\", \"#00F5FF\", \"#FFE4E1\", \"#FFFF96\", \"#FFDAB9\", \"#FAC6C6\", \"#82F9B7\", \"#FAEBD7\"];\nvar colorIndex = 0;\nvar colorMap = {};\ncolorMap['default'] = \"transparent\";\nvar NOW = new Date();\nvar TIMEZONE = NOW.getTimezoneOffset() * 60000;\nvar NUM_OF_WEEKS = 16;\n\nDate.prototype.getWeek = function (dowOffset) {\n  dowOffset = typeof dowOffset == 'number' ? dowOffset : 0;\n  var newYear = new Date(this.getFullYear(), 0, 1);\n  var day = newYear.getDay() - dowOffset;\n  day = day >= 0 ? day : day + 7;\n  var daynum = Math.floor((this.getTime() - newYear.getTime() - (this.getTimezoneOffset() - newYear.getTimezoneOffset()) * 60000) / 86400000) + 1;\n  var weeknum;\n\n  if (day < 4) {\n    weeknum = Math.floor((daynum + day - 1) / 7) + 1;\n\n    if (weeknum > 52) {\n      var nYear = new Date(this.getFullYear() + 1, 0, 1);\n      var nday = nYear.getDay() - dowOffset;\n      nday = nday >= 0 ? nday : nday + 7;\n      weeknum = nday < 4 ? 1 : 53;\n    }\n  } else {\n    weeknum = Math.floor((daynum + day - 1) / 7);\n  }\n\n  return weeknum;\n};\n\nfunction get_currenet_week(START_DATE) {\n  if (START_DATE) {\n    var START_WEEK = START_DATE.getWeek(1);\n    console.log(\"START_WEEK: \", START_WEEK);\n    return NOW.getWeek(1) - START_WEEK;\n  }\n}\n\nvar dates = [];\nvar start = new Date(2020, 8, 1);\nvar end = new Date(2020, 11, 16);\n\nfor (var d = start; d < end; d.setDate(d.getDate() + 1)) {\n  dates.push(new Date(d));\n}\n\nfunction is_empty(obj) {\n  return Object.keys(obj).length === 0;\n}\n\nvar weekday = ['월', '화', '수', '목', '금', '토', '일', 'VOD'];\n\nvar Weekday = function Weekday(_ref) {\n  var classes = _ref.classes,\n      day = _ref.day;\n\n  if (classes.length == 0) {\n    return React.createElement(View, {\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: {\n        flex: 1,\n        padding: 3,\n        justifyContent: \"center\",\n        borderBottomWidth: 0,\n        borderColor: \"#dcdcdc\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: \"center\",\n        fontWeight: \"600\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }, weekday[day])), React.createElement(View, {\n      style: {\n        flex: 8,\n        padding: 5,\n        borderBottomWidth: 1,\n        borderColor: \"#dcdcdc\",\n        marginRight: 10\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#323232\",\n        fontWeight: \"600\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, \" - \"))));\n  }\n\n  return React.createElement(View, {\n    style: {\n      flexDirection: \"row\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      padding: 3,\n      justifyContent: \"center\",\n      borderBottomWidth: 0,\n      borderColor: \"#dcdcdc\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: {\n      textAlign: \"center\",\n      fontWeight: \"600\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, weekday[day])), React.createElement(View, {\n    style: {\n      flex: 8,\n      padding: 5,\n      borderBottomWidth: 1,\n      borderColor: \"#dcdcdc\",\n      marginRight: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, classes.map(function (class_obj, index) {\n    return React.createElement(View, {\n      key: index,\n      style: {\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: {\n        flex: 5\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#323232\",\n        fontWeight: \"600\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 19\n      }\n    }, class_obj.name, \" \", class_obj.type != \"VOD\" ? \"/ \" + class_obj.room : null)), React.createElement(View, {\n      style: {\n        flex: 3,\n        justifyContent: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, class_obj.type != \"VOD\" ? React.createElement(Text, {\n      style: {\n        fontSize: 10,\n        color: \"#8c8c8c\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, class_obj.type, \" \", class_obj.start_time, \"~\", class_obj.end_time) : null));\n  })));\n};\n\nfunction Weekly(_ref2) {\n  var _this2 = this;\n\n  var class_list = _ref2.class_list;\n  var weekdays = [0, 1, 2, 3, 4, 5, 6, 7];\n  var current_week = get_currenet_week();\n  var weekly_classes = new Array(8);\n\n  for (var i = 0; i < weekly_classes.length; i++) {\n    weekly_classes[i] = new Array();\n  }\n\n  for (var _i = 0; _i < class_list.length; _i++) {\n    if (class_list[_i].week == current_week) {\n      var day = class_list[_i].start_time.getDay() - 1;\n      if (day == -1) day = 6;\n\n      var sH = class_list[_i].start_time.getHours();\n\n      var sM = class_list[_i].start_time.getMinutes();\n\n      var eH = class_list[_i].end_time.getHours();\n\n      var eM = class_list[_i].end_time.getMinutes();\n\n      var type = class_list[_i].vod ? \"VOD\" : \"SC\";\n      if (type == \"VOD\") day = 7;\n      var class_obj = {\n        name: class_list[_i].name,\n        room: class_list[_i].room,\n        day: day,\n        start_time: (sH >= 10 ? sH : \"0\" + sH) + \":\" + (sM >= 10 ? sM : \"0\" + sM),\n        end_time: (eH >= 10 ? eH : \"0\" + eH) + \":\" + (eM >= 10 ? eM : \"0\" + eM),\n        type: type\n      };\n      weekly_classes[day].push(class_obj);\n    }\n  }\n\n  return React.createElement(ScrollView, {\n    style: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, weekdays.map(function (day, index) {\n    return React.createElement(Weekday, {\n      key: index,\n      classes: weekly_classes[day],\n      day: day,\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 18\n      }\n    });\n  }));\n}\n\nfunction WeekdayClassbox(_ref3) {\n  var class_name = _ref3.class_name;\n\n  if (class_name) {\n    return React.createElement(View, {\n      style: styles.classbox(class_name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: styles.classboxText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }\n    }, class_name));\n  } else {\n    return React.createElement(View, {\n      style: styles.classbox(\"default\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 7\n      }\n    });\n  }\n}\n\nfunction WeekendClassbox(_ref4) {\n  var class_names = _ref4.class_names;\n  var len = class_names.length;\n  var names = ['-', '-', '-'];\n\n  for (var i = 0; i < len; i++) {\n    names[i] = class_names[i];\n  }\n\n  return React.createElement(View, {\n    style: styles.classbox2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      backgroundColor: colorMap[names[0]],\n      justifyContent: \"center\",\n      paddingVertical: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.classboxTextsmall,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, names[0])), React.createElement(View, {\n    style: {\n      flex: 1,\n      backgroundColor: colorMap[names[1]],\n      justifyContent: \"center\",\n      paddingVertical: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.classboxTextsmall,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }\n  }, names[1])), React.createElement(View, {\n    style: {\n      flex: 1,\n      backgroundColor: colorMap[names[2]],\n      justifyContent: \"center\",\n      paddingVertical: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.classboxTextsmall,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }\n  }, names[2])));\n}\n\nfunction MonthlyBody(_ref5) {\n  var _this3 = this;\n\n  var classes = _ref5.classes;\n  var weekdays = [0, 1, 2, 3, 4];\n  var weekends = [5, 6];\n  var weeks = new Array(NUM_OF_WEEKS);\n\n  for (var i = 0; i < weeks.length; i++) {\n    weeks[i] = i + 1;\n  }\n\n  return React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 5\n    }\n  }, weeks.map(function (week, index) {\n    return React.createElement(View, {\n      key: index,\n      style: {\n        flexDirection: \"row\",\n        flex: 1\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      style: {\n        flex: 1,\n        justifyContent: \"center\",\n        borderTopWidth: 1,\n        borderColor: \"#dcdcdc\"\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: \"center\",\n        fontSize: 10,\n        fontWeight: \"900\"\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }, week, \"\\uC8FC\\uCC28\")), React.createElement(View, {\n      style: {\n        flexDirection: \"row\",\n        flex: 5\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 15\n      }\n    }, weekdays.map(function (day, index) {\n      return React.createElement(WeekdayClassbox, {\n        key: index,\n        class_name: classes[week][day],\n        __self: _this3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 28\n        }\n      });\n    })), React.createElement(View, {\n      style: {\n        flexDirection: \"row\",\n        flex: 2\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 15\n      }\n    }, weekends.map(function (day, index) {\n      return React.createElement(WeekendClassbox, {\n        key: index,\n        class_names: classes[week][day],\n        __self: _this3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 28\n        }\n      });\n    })));\n  }));\n}\n\nfunction MonthlyHeader() {\n  return React.createElement(View, {\n    style: styles.weeklyHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.weeklyHeaderBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: {\n      textAlign: \"center\",\n      fontWeight: \"700\",\n      fontSize: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.weeklyHeaderBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.weeklyHeaderText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }\n  }, \"\\uC6D4\")), React.createElement(View, {\n    style: styles.weeklyHeaderBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.weeklyHeaderText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 9\n    }\n  }, \"\\uD654\")), React.createElement(View, {\n    style: styles.weeklyHeaderBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.weeklyHeaderText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }\n  }, \"\\uC218\")), React.createElement(View, {\n    style: styles.weeklyHeaderBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.weeklyHeaderText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 9\n    }\n  }, \"\\uBAA9\")), React.createElement(View, {\n    style: styles.weeklyHeaderBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.weeklyHeaderText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 9\n    }\n  }, \"\\uAE08\")), React.createElement(View, {\n    style: styles.weeklyHeaderBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.weeklyHeaderText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 9\n    }\n  }, \"\\uD1A0\")), React.createElement(View, {\n    style: styles.weeklyHeaderBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.weeklyHeaderText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 9\n    }\n  }, \"\\uC77C\")));\n}\n\nfunction Monthly(_ref6) {\n  var class_list = _ref6.class_list;\n  var classes = new Array(NUM_OF_WEEKS + 1);\n\n  for (var i = 0; i < classes.length; i++) {\n    classes[i] = [false, false, false, false, false, [], []];\n  }\n\n  for (var _i2 = 0; _i2 < class_list.length; _i2++) {\n    var week = class_list[_i2].week;\n    var day = class_list[_i2].start_time.getDay() - 1;\n    if (day == -1) day = 6;\n    var type = class_list[_i2].vod ? \"VOD\" : \"SC\";\n    if (type == \"VOD\") continue;\n    if (day < 5) classes[week][day] = class_list[_i2].name;else classes[week][day].push(class_list[_i2].name);\n  }\n\n  return React.createElement(ScrollView, {\n    stickyHeaderIndices: [0],\n    style: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 5\n    }\n  }, React.createElement(MonthlyHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }\n  }), React.createElement(MonthlyBody, {\n    classes: classes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction Main(_ref7) {\n  var navigation = _ref7.navigation,\n      START_DATE = _ref7.START_DATE;\n  console.log(\"Main(ScheduleScreen) rendering\");\n  var user_meta = React.useContext(IdContext);\n\n  var _useQuery = useQuery(SEE_REGIST_LECTURE),\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      refetch = _useQuery.refetch;\n\n  if (loading) {\n    console.log(\"loading...\");\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"#1478FF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (data) {\n    var lectures = data.seeRegistLecture;\n    console.log(\"lectures.length: \", lectures.length);\n    var class_list = [];\n    colorIndex = 0;\n\n    for (var i = 0; i < lectures.length; i++) {\n      colorMap[lectures[i].name] = colors[colorIndex++];\n      var num_of_classes = lectures[i].classes.length;\n\n      for (var j = 0; j < num_of_classes; j++) {\n        var start_time = new Date(Number(lectures[i].classes[j].startTime) + TIMEZONE);\n        var end_time = new Date(Number(lectures[i].classes[j].endTime) + TIMEZONE);\n        var class_obj = {\n          name: lectures[i].name,\n          room: lectures[i].room,\n          start_time: start_time,\n          end_time: end_time,\n          week: lectures[i].classes[j].week,\n          vod: lectures[i].classes[j].VOD\n        };\n        class_list.push(class_obj);\n      }\n    }\n\n    class_list.sort(function (a, b) {\n      return a.start_time.getTime() - b.start_time.getTime();\n    });\n    var WEEK = get_currenet_week(new Date(START_DATE));\n    console.log(\"WEEK: \", WEEK);\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: {\n        flex: 5\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: \"left\",\n        paddingLeft: 30,\n        fontWeight: \"700\",\n        paddingTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 11\n      }\n    }, \"\\uAE08\\uC8FC \\uC218\\uC5C5 \", WEEK < 0 ? 0 : WEEK, \"\\uC8FC\\uCC28\"), React.createElement(Weekly, {\n      class_list: class_list,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 11\n      }\n    })), React.createElement(View, {\n      style: {\n        flex: 5\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: \"left\",\n        paddingLeft: 30,\n        fontWeight: \"700\",\n        paddingTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 11\n      }\n    }, \"\\uC804\\uCCB4 \\uC2DC\\uAC04\\uD45C\"), React.createElement(Monthly, {\n      class_list: class_list,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 11\n      }\n    })), React.createElement(View, {\n      style: {\n        flex: 2,\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: styles.button,\n      onPress: function onPress() {\n        return navigation.navigate('RegisterLectureScreen');\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 20,\n        color: \"white\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 13\n      }\n    }, \"\\uC2DC\\uAC04\\uD45C \\uCD94\\uAC00\")), React.createElement(TouchableOpacity, {\n      style: styles.button,\n      onPress: function onPress() {\n        return navigation.navigate('EditLectureScreen');\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 20,\n        color: \"white\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 13\n      }\n    }, \"\\uC2DC\\uAC04\\uD45C \\uD3B8\\uC9D1\"))));\n  }\n\n  useFocusEffect(React.useCallback(function () {\n    alert('SCREEN IS FOCUSED');\n    return function () {\n      alert(\"SCREEN WAS UNFOCUSED\");\n    };\n  }, []));\n}\n\nexport default function ScheduleScreen(_ref8) {\n  var navigation = _ref8.navigation;\n  console.log(\"ScheduleScreen\");\n  var isFocused = useIsFocused();\n  var user_info = React.useContext(UserContext);\n  var user_meta = React.useContext(IdContext);\n  var client = new ApolloClient({\n    uri: \"http://52.251.50.212:4000/\",\n    cache: new InMemoryCache(),\n    headers: {\n      Authorization: \"Bearer \" + user_info.token\n    }\n  });\n\n  var _useQuery2 = useQuery(GET_START_DATE),\n      loading = _useQuery2.loading,\n      error = _useQuery2.error,\n      data = _useQuery2.data;\n\n  if (loading) {\n    console.log(\"loading...\");\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"#1478FF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (data) {\n    var START_DATE = Number(data.getStartDate.startDate);\n    console.log(\"START_DATE: \", START_DATE);\n\n    if (isFocused) {\n      if (user_meta.grade >= 2) {\n        AdMobInterstitial.setAdUnitID(AD_ID).then(function () {\n          AdMobInterstitial.requestAdAsync().then(function () {\n            return AdMobInterstitial.showAdAsync();\n          });\n        });\n      }\n\n      colorIndex = 0;\n      return React.createElement(ApolloProvider, {\n        client: client,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 9\n        }\n      }, React.createElement(Main, {\n        navigation: navigation,\n        START_DATE: START_DATE,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }\n      }));\n    } else {\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 14\n        }\n      });\n    }\n  }\n}\nvar styles = StyleSheet.create({\n  adcard: {\n    marginVertical: 5,\n    borderRadius: 10,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  classboxText: {\n    textAlign: \"center\",\n    fontSize: 11\n  },\n  classboxTextsmall: {\n    textAlign: \"center\",\n    fontSize: 6\n  },\n  classbox: function classbox(name) {\n    return {\n      paddingHorizontal: 3,\n      paddingVertical: 5,\n      justifyContent: \"center\",\n      borderLeftWidth: 1,\n      borderTopWidth: 1,\n      borderColor: \"#dcdcdc\",\n      backgroundColor: colorMap[name],\n      flex: 1\n    };\n  },\n  classbox2: {\n    justifyContent: \"center\",\n    borderLeftWidth: 1,\n    borderTopWidth: 1,\n    borderColor: \"#dcdcdc\",\n    flex: 1\n  },\n  weeklyHeader: {\n    backgroundColor: \"white\",\n    flexDirection: 'row',\n    borderTopLeftRadius: 10,\n    borderTopRightRadius: 10,\n    borderBottomColor: \"#dcdcdc\"\n  },\n  weeklyHeaderBox: {\n    padding: 9,\n    flex: 1\n  },\n  weeklyHeaderText: {\n    textAlign: \"center\",\n    fontWeight: \"700\"\n  },\n  scrollView: {\n    height: 200\n  },\n  card2: {\n    marginVertical: 5,\n    marginHorizontal: 25,\n    borderWidth: 1,\n    borderColor: \"#dcdcdc\",\n    borderRadius: 10,\n    height: \"40%\"\n  },\n  card: {\n    backgroundColor: \"white\",\n    marginVertical: 5,\n    marginHorizontal: 25,\n    borderWidth: 1,\n    borderColor: \"#dcdcdc\",\n    borderRadius: 10\n  },\n  date: {\n    margin: 5,\n    color: \"blue\",\n    fontSize: 15,\n    borderColor: \"black\",\n    textAlign: \"center\"\n  },\n  time: {\n    margin: 5,\n    fontWeight: \"600\",\n    fontSize: 20,\n    textAlign: \"center\"\n  },\n  subject: {\n    textAlign: \"center\",\n    fontSize: 30,\n    fontWeight: \"600\"\n  },\n  location: {\n    textAlign: \"center\",\n    fontSize: 10,\n    color: \"#646464\"\n  },\n  week: {\n    margin: 5,\n    textAlign: \"center\",\n    fontSize: 10,\n    color: \"#646464\"\n  },\n  where: {\n    marginTop: 7,\n    padding: 3,\n    borderRadius: 10,\n    backgroundColor: \"#dcdcdc\",\n    alignSelf: \"center\",\n    fontSize: 10,\n    color: \"grey\"\n  },\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center'\n  },\n  button: {\n    alignItems: 'center',\n    marginVertical: 10,\n    marginHorizontal: 10,\n    padding: 10,\n    width: \"40%\",\n    borderRadius: 10,\n    backgroundColor: \"#1478FF\",\n    borderColor: \"white\"\n  },\n  adButton: {\n    alignItems: 'center',\n    justifyContent: \"center\",\n    marginVertical: 10,\n    marginHorizontal: 50,\n    padding: 10,\n    borderRadius: 10,\n    backgroundColor: \"red\",\n    borderColor: \"white\"\n  }\n});","map":{"version":3,"sources":["C:/Users/heejun/test0220/screens/ScheduleScreen.js"],"names":["React","IdContext","UserContext","ApolloClient","InMemoryCache","useQuery","ApolloProvider","SEE_REGIST_LECTURE","GET_START_DATE","useFocusEffect","useIsFocused","AdMobInterstitial","AD_ID","Platform","OS","colors","colorIndex","colorMap","NOW","Date","TIMEZONE","getTimezoneOffset","NUM_OF_WEEKS","prototype","getWeek","dowOffset","newYear","getFullYear","day","getDay","daynum","Math","floor","getTime","weeknum","nYear","nday","get_currenet_week","START_DATE","START_WEEK","console","log","dates","start","end","d","setDate","getDate","push","is_empty","obj","Object","keys","length","weekday","Weekday","classes","flexDirection","flex","padding","justifyContent","borderBottomWidth","borderColor","textAlign","fontWeight","marginRight","color","map","class_obj","index","name","type","room","fontSize","start_time","end_time","Weekly","class_list","weekdays","current_week","weekly_classes","Array","i","week","sH","getHours","sM","getMinutes","eH","eM","vod","styles","card","WeekdayClassbox","class_name","classbox","classboxText","WeekendClassbox","class_names","len","names","classbox2","backgroundColor","paddingVertical","classboxTextsmall","MonthlyBody","weekends","weeks","borderTopWidth","MonthlyHeader","weeklyHeader","weeklyHeaderBox","weeklyHeaderText","Monthly","Main","navigation","user_meta","useContext","loading","error","data","refetch","alignItems","lectures","seeRegistLecture","num_of_classes","j","Number","startTime","endTime","VOD","sort","a","b","WEEK","paddingLeft","paddingTop","button","navigate","useCallback","alert","ScheduleScreen","isFocused","user_info","client","uri","cache","headers","Authorization","token","getStartDate","startDate","grade","setAdUnitID","then","requestAdAsync","showAdAsync","StyleSheet","create","adcard","marginVertical","borderRadius","paddingHorizontal","borderLeftWidth","borderTopLeftRadius","borderTopRightRadius","borderBottomColor","scrollView","height","card2","marginHorizontal","borderWidth","date","margin","time","subject","location","where","marginTop","alignSelf","container","width","adButton"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,WAApB;;;;;;;;;AAEA,SAASC,YAAT,EAAuBC,aAAvB,EAAsCC,QAAtC,EAAgDC,cAAhD,QAAsE,gBAAtE;AACA,SACEC,kBADF,EAEEC,cAFF;AAIA,SAASC,cAAT,EAAyBC,YAAzB,QAA6C,0BAA7C;AAEA,SACEC,iBADF,QAEO,gBAFP;AAIA,IAAMC,KAAK,GAAGC,QAAQ,CAACC,EAAT,KAAgB,KAAhB,GAAuB,wCAAvB,GAAkE,wCAAhF;AACA,IAAMC,MAAM,GAAG,CACb,SADa,EACF,SADE,EACS,SADT,EACoB,SADpB,EACgC,SADhC,EAC2C,SAD3C,EACsD,SADtD,EACiE,SADjE,CAAf;AAGA,IAAIC,UAAU,GAAG,CAAjB;AACA,IAAIC,QAAQ,GAAG,EAAf;AACAA,QAAQ,CAAC,SAAD,CAAR,GAAsB,aAAtB;AAEA,IAAMC,GAAG,GAAG,IAAIC,IAAJ,EAAZ;AACA,IAAMC,QAAQ,GAAGF,GAAG,CAACG,iBAAJ,KAAwB,KAAzC;AACA,IAAMC,YAAY,GAAG,EAArB;;AAEAH,IAAI,CAACI,SAAL,CAAeC,OAAf,GAAyB,UAAUC,SAAV,EAAqB;AAG5CA,EAAAA,SAAS,GAAG,OAAOA,SAAP,IAAqB,QAArB,GAAgCA,SAAhC,GAA4C,CAAxD;AACA,MAAIC,OAAO,GAAG,IAAIP,IAAJ,CAAS,KAAKQ,WAAL,EAAT,EAA4B,CAA5B,EAA8B,CAA9B,CAAd;AACA,MAAIC,GAAG,GAAGF,OAAO,CAACG,MAAR,KAAmBJ,SAA7B;AACAG,EAAAA,GAAG,GAAIA,GAAG,IAAI,CAAP,GAAWA,GAAX,GAAiBA,GAAG,GAAG,CAA9B;AACA,MAAIE,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAW,CAAC,KAAKC,OAAL,KAAiBP,OAAO,CAACO,OAAR,EAAjB,GACvB,CAAC,KAAKZ,iBAAL,KAAyBK,OAAO,CAACL,iBAAR,EAA1B,IAAuD,KADjC,IACwC,QADnD,IAC+D,CAD5E;AAEA,MAAIa,OAAJ;;AAEA,MAAGN,GAAG,GAAG,CAAT,EAAY;AACVM,IAAAA,OAAO,GAAGH,IAAI,CAACC,KAAL,CAAW,CAACF,MAAM,GAACF,GAAP,GAAW,CAAZ,IAAe,CAA1B,IAA+B,CAAzC;;AACA,QAAGM,OAAO,GAAG,EAAb,EAAiB;AACf,UAAIC,KAAK,GAAG,IAAIhB,IAAJ,CAAS,KAAKQ,WAAL,KAAqB,CAA9B,EAAgC,CAAhC,EAAkC,CAAlC,CAAZ;AACA,UAAIS,IAAI,GAAGD,KAAK,CAACN,MAAN,KAAiBJ,SAA5B;AACAW,MAAAA,IAAI,GAAGA,IAAI,IAAI,CAAR,GAAYA,IAAZ,GAAmBA,IAAI,GAAG,CAAjC;AAGAF,MAAAA,OAAO,GAAGE,IAAI,GAAG,CAAP,GAAW,CAAX,GAAe,EAAzB;AACD;AACF,GAVD,MAWK;AACHF,IAAAA,OAAO,GAAGH,IAAI,CAACC,KAAL,CAAW,CAACF,MAAM,GAACF,GAAP,GAAW,CAAZ,IAAe,CAA1B,CAAV;AACD;;AACD,SAAOM,OAAP;AACD,CA1BD;;AA4BA,SAASG,iBAAT,CAA2BC,UAA3B,EAAsC;AACpC,MAAGA,UAAH,EAAc;AACZ,QAAMC,UAAU,GAAGD,UAAU,CAACd,OAAX,CAAmB,CAAnB,CAAnB;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,UAA5B;AACA,WAAOrB,GAAG,CAACM,OAAJ,CAAY,CAAZ,IAAee,UAAtB;AACD;AACF;;AAGD,IAAIG,KAAK,GAAG,EAAZ;AACA,IAAMC,KAAK,GAAG,IAAIxB,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,CAAd;AACA,IAAMyB,GAAG,GAAG,IAAIzB,IAAJ,CAAS,IAAT,EAAe,EAAf,EAAmB,EAAnB,CAAZ;;AACA,KAAK,IAAI0B,CAAC,GAAGF,KAAb,EAAoBE,CAAC,GAAGD,GAAxB,EAA6BC,CAAC,CAACC,OAAF,CAAUD,CAAC,CAACE,OAAF,KAAc,CAAxB,CAA7B,EAAyD;AACvDL,EAAAA,KAAK,CAACM,IAAN,CAAW,IAAI7B,IAAJ,CAAS0B,CAAT,CAAX;AACD;;AAED,SAASI,QAAT,CAAkBC,GAAlB,EAAuB;AACrB,SAAOC,MAAM,CAACC,IAAP,CAAYF,GAAZ,EAAiBG,MAAjB,KAA4B,CAAnC;AACD;;AAED,IAAMC,OAAO,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA8B,GAA9B,EAAkC,KAAlC,CAAhB;;AAQA,IAAMC,OAAO,GAAG,SAAVA,OAAU,OAAsB;AAAA,MAAnBC,OAAmB,QAAnBA,OAAmB;AAAA,MAAV5B,GAAU,QAAVA,GAAU;;AAGpC,MAAI4B,OAAO,CAACH,MAAR,IAAkB,CAAtB,EAAwB;AACtB,WACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEI,QAAAA,aAAa,EAAE;AAAjB,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AACXC,QAAAA,IAAI,EAAE,CADK;AAEXC,QAAAA,OAAO,EAAC,CAFG;AAGXC,QAAAA,cAAc,EAAC,QAHJ;AAIXC,QAAAA,iBAAiB,EAAE,CAJR;AAKXC,QAAAA,WAAW,EAAE;AALF,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,SAAS,EAAE,QAAZ;AAAqBC,QAAAA,UAAU,EAAE;AAAjC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuDV,OAAO,CAAC1B,GAAD,CAA9D,CAPF,CADF,EAUE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AACX8B,QAAAA,IAAI,EAAE,CADK;AAEXC,QAAAA,OAAO,EAAE,CAFE;AAGXE,QAAAA,iBAAiB,EAAE,CAHR;AAIXC,QAAAA,WAAW,EAAE,SAJF;AAKXG,QAAAA,WAAW,EAAE;AALF,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,KAAK,EAAC,SAAP;AAAiBF,QAAAA,UAAU,EAAC;AAA5B,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CAPF,CAVF,CADF;AAwBD;;AACD,SACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEP,MAAAA,aAAa,EAAE;AAAjB,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AACXC,MAAAA,IAAI,EAAE,CADK;AAEXC,MAAAA,OAAO,EAAC,CAFG;AAGXC,MAAAA,cAAc,EAAC,QAHJ;AAIXC,MAAAA,iBAAiB,EAAE,CAJR;AAKXC,MAAAA,WAAW,EAAE;AALF,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAE,QAAZ;AAAsBC,MAAAA,UAAU,EAAE;AAAlC,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwDV,OAAO,CAAC1B,GAAD,CAA/D,CAPF,CADF,EAUE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AACX8B,MAAAA,IAAI,EAAC,CADM;AAEXC,MAAAA,OAAO,EAAC,CAFG;AAGXE,MAAAA,iBAAiB,EAAE,CAHR;AAIXC,MAAAA,WAAW,EAAE,SAJF;AAKXG,MAAAA,WAAW,EAAE;AALF,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQIT,OAAO,CAACW,GAAR,CAAY,UAACC,SAAD,EAAYC,KAAZ,EAAoB;AAC9B,WACE,oBAAC,IAAD;AAAM,MAAA,GAAG,EAAEA,KAAX;AAAkB,MAAA,KAAK,EAAE;AAACZ,QAAAA,aAAa,EAAC;AAAf,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AACXC,QAAAA,IAAI,EAAE;AADK,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACQ,QAAAA,KAAK,EAAC,SAAP;AAAiBF,QAAAA,UAAU,EAAC;AAA5B,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAkDI,SAAS,CAACE,IAA5D,OAAmEF,SAAS,CAACG,IAAV,IAAkB,KAAlB,UAA8BH,SAAS,CAACI,IAAxC,GAA+C,IAAlH,CAJF,CADF,EAOE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACd,QAAAA,IAAI,EAAE,CAAP;AAAmDE,QAAAA,cAAc,EAAC;AAAlE,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEIQ,SAAS,CAACG,IAAV,IAAkB,KAAlB,GACA,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACE,QAAAA,QAAQ,EAAC,EAAV;AAAaP,QAAAA,KAAK,EAAC;AAAnB,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6CE,SAAS,CAACG,IAAvD,OAA8DH,SAAS,CAACM,UAAxE,OAAqFN,SAAS,CAACO,QAA/F,CADA,GAGA,IALJ,CAPF,CADF;AAkBD,GAnBD,CARJ,CAVF,CADF;AA2CD,CAxED;;AA0EA,SAASC,MAAT,QAAgC;AAAA;;AAAA,MAAdC,UAAc,SAAdA,UAAc;AAC9B,MAAMC,QAAQ,GAAG,CAAC,CAAD,EAAG,CAAH,EAAM,CAAN,EAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAiB,CAAjB,EAAmB,CAAnB,CAAjB;AACA,MAAMC,YAAY,GAAG1C,iBAAiB,EAAtC;AAEA,MAAI2C,cAAc,GAAG,IAAIC,KAAJ,CAAU,CAAV,CAArB;;AACA,OAAK,IAAIC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACF,cAAc,CAAC3B,MAA/B,EAAuC6B,CAAC,EAAxC,EAA2C;AACzCF,IAAAA,cAAc,CAACE,CAAD,CAAd,GAAoB,IAAID,KAAJ,EAApB;AACD;;AAED,OAAK,IAAIC,EAAC,GAAC,CAAX,EAAcA,EAAC,GAACL,UAAU,CAACxB,MAA3B,EAAmC6B,EAAC,EAApC,EAAuC;AACrC,QAAIL,UAAU,CAACK,EAAD,CAAV,CAAcC,IAAd,IAAsBJ,YAA1B,EAAuC;AACrC,UAAInD,GAAG,GAAGiD,UAAU,CAACK,EAAD,CAAV,CAAcR,UAAd,CAAyB7C,MAAzB,KAAkC,CAA5C;AACA,UAAID,GAAG,IAAI,CAAC,CAAZ,EAAeA,GAAG,GAAG,CAAN;;AACf,UAAIwD,EAAE,GAAGP,UAAU,CAACK,EAAD,CAAV,CAAcR,UAAd,CAAyBW,QAAzB,EAAT;;AACA,UAAIC,EAAE,GAAGT,UAAU,CAACK,EAAD,CAAV,CAAcR,UAAd,CAAyBa,UAAzB,EAAT;;AACA,UAAIC,EAAE,GAAGX,UAAU,CAACK,EAAD,CAAV,CAAcP,QAAd,CAAuBU,QAAvB,EAAT;;AACA,UAAII,EAAE,GAAGZ,UAAU,CAACK,EAAD,CAAV,CAAcP,QAAd,CAAuBY,UAAvB,EAAT;;AACA,UAAIhB,IAAI,GAAGM,UAAU,CAACK,EAAD,CAAV,CAAcQ,GAAd,GAAmB,KAAnB,GAAyB,IAApC;AACA,UAAInB,IAAI,IAAI,KAAZ,EAAmB3C,GAAG,GAAG,CAAN;AACnB,UAAIwC,SAAS,GAAG;AACdE,QAAAA,IAAI,EAAEO,UAAU,CAACK,EAAD,CAAV,CAAcZ,IADN;AAEdE,QAAAA,IAAI,EAAEK,UAAU,CAACK,EAAD,CAAV,CAAcV,IAFN;AAGd5C,QAAAA,GAAG,EAAEA,GAHS;AAId8C,QAAAA,UAAU,GAAKU,EAAE,IAAE,EAAJ,GAAOA,EAAP,SAAcA,EAAnB,WAA2BE,EAAE,IAAE,EAAJ,GAAOA,EAAP,SAAcA,EAAzC,CAJI;AAKdX,QAAAA,QAAQ,GAAKa,EAAE,IAAE,EAAJ,GAAOA,EAAP,SAAcA,EAAnB,WAA2BC,EAAE,IAAE,EAAJ,GAAOA,EAAP,SAAcA,EAAzC,CALM;AAMdlB,QAAAA,IAAI,EAAEA;AANQ,OAAhB;AAQAS,MAAAA,cAAc,CAACpD,GAAD,CAAd,CAAoBoB,IAApB,CAAyBoB,SAAzB;AACD;AACF;;AAGD,SACE,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAEuB,MAAM,CAACC,IAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEId,QAAQ,CAACX,GAAT,CAAa,UAACvC,GAAD,EAAMyC,KAAN,EAAgB;AAC3B,WAAO,oBAAC,OAAD;AAAS,MAAA,GAAG,EAAEA,KAAd;AAAqB,MAAA,OAAO,EAAEW,cAAc,CAACpD,GAAD,CAA5C;AAAmD,MAAA,GAAG,EAAEA,GAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD,GAFD,CAFJ,CADF;AASD;;AAGD,SAASiE,eAAT,QAAsC;AAAA,MAAZC,UAAY,SAAZA,UAAY;;AAEpC,MAAIA,UAAJ,EAAe;AACb,WACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEH,MAAM,CAACI,QAAP,CAAgBD,UAAhB,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEH,MAAM,CAACK,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAmCF,UAAnC,CADF,CADF;AAKD,GAND,MAOI;AACF,WACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEH,MAAM,CAACI,QAAP,CAAgB,SAAhB,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAID;AACF;;AAED,SAASE,eAAT,QAAuC;AAAA,MAAbC,WAAa,SAAbA,WAAa;AAErC,MAAMC,GAAG,GAAGD,WAAW,CAAC7C,MAAxB;AACA,MAAI+C,KAAK,GAAG,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAZ;;AACA,OAAI,IAAIlB,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACiB,GAAf,EAAoBjB,CAAC,EAArB,EAAwB;AACtBkB,IAAAA,KAAK,CAAClB,CAAD,CAAL,GAAWgB,WAAW,CAAChB,CAAD,CAAtB;AACD;;AAED,SACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAES,MAAM,CAACU,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAC3C,MAAAA,IAAI,EAAC,CAAN;AAAS4C,MAAAA,eAAe,EAAErF,QAAQ,CAACmF,KAAK,CAAC,CAAD,CAAN,CAAlC;AAAsFxC,MAAAA,cAAc,EAAC,QAArG;AAA+G2C,MAAAA,eAAe,EAAC;AAA/H,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEZ,MAAM,CAACa,iBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwCJ,KAAK,CAAC,CAAD,CAA7C,CADF,CADF,EAIE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAC1C,MAAAA,IAAI,EAAC,CAAN;AAAS4C,MAAAA,eAAe,EAAErF,QAAQ,CAACmF,KAAK,CAAC,CAAD,CAAN,CAAlC;AAAsFxC,MAAAA,cAAc,EAAC,QAArG;AAA+G2C,MAAAA,eAAe,EAAC;AAA/H,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEZ,MAAM,CAACa,iBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwCJ,KAAK,CAAC,CAAD,CAA7C,CADF,CAJF,EAOE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAC1C,MAAAA,IAAI,EAAC,CAAN;AAAS4C,MAAAA,eAAe,EAAErF,QAAQ,CAACmF,KAAK,CAAC,CAAD,CAAN,CAAlC;AAAsFxC,MAAAA,cAAc,EAAC,QAArG;AAA+G2C,MAAAA,eAAe,EAAC;AAA/H,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEZ,MAAM,CAACa,iBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwCJ,KAAK,CAAC,CAAD,CAA7C,CADF,CAPF,CADF;AAaD;;AACD,SAASK,WAAT,QAA+B;AAAA;;AAAA,MAATjD,OAAS,SAATA,OAAS;AAC7B,MAAMsB,QAAQ,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAAjB;AACA,MAAM4B,QAAQ,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAjB;AACA,MAAIC,KAAK,GAAG,IAAI1B,KAAJ,CAAU3D,YAAV,CAAZ;;AACA,OAAI,IAAI4D,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACyB,KAAK,CAACtD,MAArB,EAA6B6B,CAAC,EAA9B;AAAkCyB,IAAAA,KAAK,CAACzB,CAAD,CAAL,GAAWA,CAAC,GAAC,CAAb;AAAlC;;AAEA,SACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIyB,KAAK,CAACxC,GAAN,CAAU,UAACgB,IAAD,EAAMd,KAAN,EAAc;AACtB,WACE,oBAAC,IAAD;AAAM,MAAA,GAAG,EAAEA,KAAX;AAAkB,MAAA,KAAK,EAAE;AAACZ,QAAAA,aAAa,EAAC,KAAf;AAAsBC,QAAAA,IAAI,EAAC;AAA3B,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACA,QAAAA,IAAI,EAAC,CAAN;AAASE,QAAAA,cAAc,EAAC,QAAxB;AAAiCgD,QAAAA,cAAc,EAAE,CAAjD;AAAmD9C,QAAAA,WAAW,EAAC;AAA/D,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,SAAS,EAAC,QAAX;AAAqBU,QAAAA,QAAQ,EAAC,EAA9B;AAAkCT,QAAAA,UAAU,EAAC;AAA7C,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAmEmB,IAAnE,iBADF,CADF,EAIE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAC1B,QAAAA,aAAa,EAAC,KAAf;AAAsBC,QAAAA,IAAI,EAAC;AAA3B,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEIoB,QAAQ,CAACX,GAAT,CAAa,UAACvC,GAAD,EAAKyC,KAAL,EAAa;AAExB,aAAO,oBAAC,eAAD;AAAiB,QAAA,GAAG,EAAEA,KAAtB;AAA6B,QAAA,UAAU,EAAEb,OAAO,CAAC2B,IAAD,CAAP,CAAcvD,GAAd,CAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAHD,CAFJ,CAJF,EAYE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAC6B,QAAAA,aAAa,EAAC,KAAf;AAAsBC,QAAAA,IAAI,EAAC;AAA3B,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEIgD,QAAQ,CAACvC,GAAT,CAAa,UAACvC,GAAD,EAAKyC,KAAL,EAAa;AAExB,aAAO,oBAAC,eAAD;AAAiB,QAAA,GAAG,EAAEA,KAAtB;AAA6B,QAAA,WAAW,EAAEb,OAAO,CAAC2B,IAAD,CAAP,CAAcvD,GAAd,CAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAHD,CAFJ,CAZF,CADF;AAuBD,GAxBD,CAFJ,CADF;AA+BD;;AAED,SAASiF,aAAT,GAAyB;AACvB,SACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAElB,MAAM,CAACmB,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEnB,MAAM,CAACoB,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAChD,MAAAA,SAAS,EAAE,QAAZ;AAAqBC,MAAAA,UAAU,EAAE,KAAjC;AAAwCS,MAAAA,QAAQ,EAAC;AAAjD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEkB,MAAM,CAACoB,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpB,MAAM,CAACqB,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAJF,EAOE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErB,MAAM,CAACoB,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpB,MAAM,CAACqB,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAPF,EAUE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErB,MAAM,CAACoB,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpB,MAAM,CAACqB,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAVF,EAaE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErB,MAAM,CAACoB,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpB,MAAM,CAACqB,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAbF,EAgBE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErB,MAAM,CAACoB,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpB,MAAM,CAACqB,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAhBF,EAmBE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErB,MAAM,CAACoB,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpB,MAAM,CAACqB,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAnBF,EAsBE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErB,MAAM,CAACoB,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpB,MAAM,CAACqB,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAtBF,CADF;AA4BD;;AAED,SAASC,OAAT,QAA8B;AAAA,MAAZpC,UAAY,SAAZA,UAAY;AAG5B,MAAIrB,OAAO,GAAG,IAAIyB,KAAJ,CAAU3D,YAAY,GAAC,CAAvB,CAAd;;AACA,OAAK,IAAI4D,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC1B,OAAO,CAACH,MAAxB,EAAgC6B,CAAC,EAAjC,EAAoC;AAClC1B,IAAAA,OAAO,CAAC0B,CAAD,CAAP,GAAa,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,EAApC,EAAuC,EAAvC,CAAb;AACD;;AAED,OAAK,IAAIA,GAAC,GAAC,CAAX,EAAcA,GAAC,GAACL,UAAU,CAACxB,MAA3B,EAAmC6B,GAAC,EAApC,EAAuC;AACrC,QAAIC,IAAI,GAAGN,UAAU,CAACK,GAAD,CAAV,CAAcC,IAAzB;AACA,QAAIvD,GAAG,GAAGiD,UAAU,CAACK,GAAD,CAAV,CAAcR,UAAd,CAAyB7C,MAAzB,KAAkC,CAA5C;AACA,QAAID,GAAG,IAAI,CAAC,CAAZ,EAAeA,GAAG,GAAG,CAAN;AACf,QAAI2C,IAAI,GAAGM,UAAU,CAACK,GAAD,CAAV,CAAcQ,GAAd,GAAmB,KAAnB,GAAyB,IAApC;AACA,QAAInB,IAAI,IAAI,KAAZ,EAAmB;AAEnB,QAAI3C,GAAG,GAAC,CAAR,EAAW4B,OAAO,CAAC2B,IAAD,CAAP,CAAcvD,GAAd,IAAmBiD,UAAU,CAACK,GAAD,CAAV,CAAcZ,IAAjC,CAAX,KACKd,OAAO,CAAC2B,IAAD,CAAP,CAAcvD,GAAd,EAAmBoB,IAAnB,CAAwB6B,UAAU,CAACK,GAAD,CAAV,CAAcZ,IAAtC;AACN;;AAID,SACE,oBAAC,UAAD;AACE,IAAA,mBAAmB,EAAE,CAAC,CAAD,CADvB;AAEE,IAAA,KAAK,EAAEqB,MAAM,CAACC,IAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,EAKE,oBAAC,WAAD;AAAa,IAAA,OAAO,EAAEpC,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CADF;AASD;;AAID,SAAS0D,IAAT,QAAwC;AAAA,MAAzBC,UAAyB,SAAzBA,UAAyB;AAAA,MAAb7E,UAAa,SAAbA,UAAa;AACtCE,EAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACA,MAAM2E,SAAS,GAAGpH,KAAK,CAACqH,UAAN,CAAiBpH,SAAjB,CAAlB;;AAFsC,kBASII,QAAQ,CAACE,kBAAD,CATZ;AAAA,MAS9B+G,OAT8B,aAS9BA,OAT8B;AAAA,MASrBC,KATqB,aASrBA,KATqB;AAAA,MASdC,IATc,aASdA,IATc;AAAA,MASRC,OATQ,aASRA,OATQ;;AAetC,MAAGH,OAAH,EAAW;AACT9E,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,WACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEiB,QAAAA,IAAI,EAAE,CAAR;AAAWE,QAAAA,cAAc,EAAE,QAA3B;AAAqC8D,QAAAA,UAAU,EAAE;AAAjD,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,iBAAD;AAAmB,MAAA,IAAI,EAAC,OAAxB;AAAgC,MAAA,KAAK,EAAC,SAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAKD;;AACD,MAAGF,IAAH,EAAQ;AAEN,QAAIG,QAAQ,GAAGH,IAAI,CAACI,gBAApB;AACApF,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCkF,QAAQ,CAACtE,MAA1C;AACA,QAAIwB,UAAU,GAAG,EAAjB;AACA7D,IAAAA,UAAU,GAAC,CAAX;;AACA,SAAI,IAAIkE,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACyC,QAAQ,CAACtE,MAAxB,EAAgC6B,CAAC,EAAjC,EAAoC;AAElCjE,MAAAA,QAAQ,CAAC0G,QAAQ,CAACzC,CAAD,CAAR,CAAYZ,IAAb,CAAR,GAA6BvD,MAAM,CAACC,UAAU,EAAX,CAAnC;AACA,UAAI6G,cAAc,GAAGF,QAAQ,CAACzC,CAAD,CAAR,CAAY1B,OAAZ,CAAoBH,MAAzC;;AACA,WAAI,IAAIyE,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACD,cAAf,EAA+BC,CAAC,EAAhC,EAAmC;AACjC,YAAIpD,UAAU,GAAG,IAAIvD,IAAJ,CAAS4G,MAAM,CAACJ,QAAQ,CAACzC,CAAD,CAAR,CAAY1B,OAAZ,CAAoBsE,CAApB,EAAuBE,SAAxB,CAAN,GAAyC5G,QAAlD,CAAjB;AACA,YAAIuD,QAAQ,GAAG,IAAIxD,IAAJ,CAAS4G,MAAM,CAACJ,QAAQ,CAACzC,CAAD,CAAR,CAAY1B,OAAZ,CAAoBsE,CAApB,EAAuBG,OAAxB,CAAN,GAAuC7G,QAAhD,CAAf;AACA,YAAIgD,SAAS,GAAG;AACdE,UAAAA,IAAI,EAAEqD,QAAQ,CAACzC,CAAD,CAAR,CAAYZ,IADJ;AAEdE,UAAAA,IAAI,EAAEmD,QAAQ,CAACzC,CAAD,CAAR,CAAYV,IAFJ;AAGdE,UAAAA,UAAU,EAAEA,UAHE;AAIdC,UAAAA,QAAQ,EAAEA,QAJI;AAKdQ,UAAAA,IAAI,EAAEwC,QAAQ,CAACzC,CAAD,CAAR,CAAY1B,OAAZ,CAAoBsE,CAApB,EAAuB3C,IALf;AAMdO,UAAAA,GAAG,EAAEiC,QAAQ,CAACzC,CAAD,CAAR,CAAY1B,OAAZ,CAAoBsE,CAApB,EAAuBI;AANd,SAAhB;AAQArD,QAAAA,UAAU,CAAC7B,IAAX,CAAgBoB,SAAhB;AACD;AACF;;AAEDS,IAAAA,UAAU,CAACsD,IAAX,CAAgB,UAACC,CAAD,EAAGC,CAAH,EAAO;AACrB,aAAOD,CAAC,CAAC1D,UAAF,CAAazC,OAAb,KAAyBoG,CAAC,CAAC3D,UAAF,CAAazC,OAAb,EAAhC;AACD,KAFD;AAIA,QAAMqG,IAAI,GAAGjG,iBAAiB,CAAC,IAAIlB,IAAJ,CAASmB,UAAT,CAAD,CAA9B;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB6F,IAAtB;AACA,WACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAC5E,QAAAA,IAAI,EAAC,CAAN;AAASE,QAAAA,cAAc,EAAE;AAAzB,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OA2BE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACF,QAAAA,IAAI,EAAC;AAAN,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEK,QAAAA,SAAS,EAAE,MAAb;AAAqBwE,QAAAA,WAAW,EAAE,EAAlC;AAAsCvE,QAAAA,UAAU,EAAE,KAAlD;AAAyDwE,QAAAA,UAAU,EAAE;AAArE,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAA+FF,IAAI,GAAC,CAAL,GAAQ,CAAR,GAAUA,IAAzG,iBADF,EAEE,oBAAC,MAAD;AAAQ,MAAA,UAAU,EAAEzD,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CA3BF,EA+BE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACnB,QAAAA,IAAI,EAAC;AAAN,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEK,QAAAA,SAAS,EAAE,MAAb;AAAqBwE,QAAAA,WAAW,EAAE,EAAlC;AAAsCvE,QAAAA,UAAU,EAAE,KAAlD;AAAyDwE,QAAAA,UAAU,EAAE;AAArE,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCADF,EAEE,oBAAC,OAAD;AAAS,MAAA,UAAU,EAAE3D,UAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CA/BF,EAmCE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACnB,QAAAA,IAAI,EAAC,CAAN;AAASD,QAAAA,aAAa,EAAE,KAAxB;AAA+BiE,QAAAA,UAAU,EAAE,QAA3C;AAAqD9D,QAAAA,cAAc,EAAC;AAApE,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,gBAAD;AAAkB,MAAA,KAAK,EAAE+B,MAAM,CAAC8C,MAAhC;AAAwC,MAAA,OAAO,EAAE;AAAA,eAAItB,UAAU,CAACuB,QAAX,CAAoB,uBAApB,CAAJ;AAAA,OAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACjE,QAAAA,QAAQ,EAAC,EAAV;AAAcP,QAAAA,KAAK,EAAC;AAApB,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCADF,CADF,EAIE,oBAAC,gBAAD;AAAkB,MAAA,KAAK,EAAEyB,MAAM,CAAC8C,MAAhC;AAAwC,MAAA,OAAO,EAAE;AAAA,eAAItB,UAAU,CAACuB,QAAX,CAAoB,mBAApB,CAAJ;AAAA,OAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACjE,QAAAA,QAAQ,EAAC,EAAV;AAAcP,QAAAA,KAAK,EAAC;AAApB,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCADF,CAJF,CAnCF,CADF;AA8CD;;AACDzD,EAAAA,cAAc,CAACT,KAAK,CAAC2I,WAAN,CAAkB,YAAI;AAEnCC,IAAAA,KAAK,CAAC,mBAAD,CAAL;AACA,WAAM,YAAI;AACRA,MAAAA,KAAK,CAAC,sBAAD,CAAL;AACD,KAFD;AAGD,GANc,EAMb,EANa,CAAD,CAAd;AAQD;;AAED,eAAe,SAASC,cAAT,QAAsC;AAAA,MAAb1B,UAAa,SAAbA,UAAa;AACnD3E,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,MAAMqG,SAAS,GAAGpI,YAAY,EAA9B;AACA,MAAMqI,SAAS,GAAG/I,KAAK,CAACqH,UAAN,CAAiBnH,WAAjB,CAAlB;AACA,MAAMkH,SAAS,GAAGpH,KAAK,CAACqH,UAAN,CAAiBpH,SAAjB,CAAlB;AACA,MAAM+I,MAAM,GAAG,IAAI7I,YAAJ,CAAiB;AAC9B8I,IAAAA,GAAG,EAAE,4BADyB;AAE9BC,IAAAA,KAAK,EAAE,IAAI9I,aAAJ,EAFuB;AAG9B+I,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,cAAYL,SAAS,CAACM;AAD5B;AAHqB,GAAjB,CAAf;;AALmD,mBAanBhJ,QAAQ,CAACG,cAAD,CAbW;AAAA,MAa3C8G,OAb2C,cAa3CA,OAb2C;AAAA,MAalCC,KAbkC,cAalCA,KAbkC;AAAA,MAa3BC,IAb2B,cAa3BA,IAb2B;;AAenD,MAAGF,OAAH,EAAW;AACT9E,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,WACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAEiB,QAAAA,IAAI,EAAE,CAAR;AAAWE,QAAAA,cAAc,EAAE,QAA3B;AAAqC8D,QAAAA,UAAU,EAAE;AAAjD,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,iBAAD;AAAmB,MAAA,IAAI,EAAC,OAAxB;AAAgC,MAAA,KAAK,EAAC,SAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAKD;;AACD,MAAGF,IAAH,EAAQ;AACN,QAAMlF,UAAU,GAAGyF,MAAM,CAACP,IAAI,CAAC8B,YAAL,CAAkBC,SAAnB,CAAzB;AACA/G,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2BH,UAA3B;;AACA,QAAGwG,SAAH,EAAa;AAEX,UAAG1B,SAAS,CAACoC,KAAV,IAAmB,CAAtB,EAAwB;AACtB7I,QAAAA,iBAAiB,CAAC8I,WAAlB,CAA8B7I,KAA9B,EAAqC8I,IAArC,CAA0C,YAAI;AAC5C/I,UAAAA,iBAAiB,CAACgJ,cAAlB,GAAmCD,IAAnC,CAAwC;AAAA,mBAAI/I,iBAAiB,CAACiJ,WAAlB,EAAJ;AAAA,WAAxC;AACD,SAFD;AAGD;;AACD5I,MAAAA,UAAU,GAAC,CAAX;AACA,aACE,oBAAC,cAAD;AAAgB,QAAA,MAAM,EAAEgI,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,UAAU,EAAE7B,UAAlB;AAA8B,QAAA,UAAU,EAAE7E,UAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAKD,KAbD,MAcI;AACF,aAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD;AACF;AACF;AAED,IAAMqD,MAAM,GAAGkE,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,MAAM,EAAC;AACLC,IAAAA,cAAc,EAAE,CADX;AAELC,IAAAA,YAAY,EAAE,EAFT;AAGLvC,IAAAA,UAAU,EAAE,QAHP;AAIL9D,IAAAA,cAAc,EAAE;AAJX,GADwB;AAO/BoC,EAAAA,YAAY,EAAC;AACXjC,IAAAA,SAAS,EAAE,QADA;AAEXU,IAAAA,QAAQ,EAAE;AAFC,GAPkB;AAW/B+B,EAAAA,iBAAiB,EAAC;AAChBzC,IAAAA,SAAS,EAAE,QADK;AAEhBU,IAAAA,QAAQ,EAAE;AAFM,GAXa;AAe/BsB,EAAAA,QAAQ,EAAE,kBAAAzB,IAAI;AAAA,WAAK;AACjB4F,MAAAA,iBAAiB,EAAE,CADF;AAEjB3D,MAAAA,eAAe,EAAE,CAFA;AAGjB3C,MAAAA,cAAc,EAAE,QAHC;AAKjBuG,MAAAA,eAAe,EAAE,CALA;AAMjBvD,MAAAA,cAAc,EAAE,CANC;AAOjB9C,MAAAA,WAAW,EAAE,SAPI;AAQjBwC,MAAAA,eAAe,EAAErF,QAAQ,CAACqD,IAAD,CARR;AASjBZ,MAAAA,IAAI,EAAE;AATW,KAAL;AAAA,GAfiB;AA0B/B2C,EAAAA,SAAS,EAAC;AACRzC,IAAAA,cAAc,EAAE,QADR;AAGRuG,IAAAA,eAAe,EAAE,CAHT;AAIRvD,IAAAA,cAAc,EAAE,CAJR;AAKR9C,IAAAA,WAAW,EAAE,SALL;AAMRJ,IAAAA,IAAI,EAAE;AANE,GA1BqB;AAkC/BoD,EAAAA,YAAY,EAAE;AACZR,IAAAA,eAAe,EAAE,OADL;AAEZ7C,IAAAA,aAAa,EAAE,KAFH;AAKZ2G,IAAAA,mBAAmB,EAAE,EALT;AAMZC,IAAAA,oBAAoB,EAAE,EANV;AAOZC,IAAAA,iBAAiB,EAAE;AAPP,GAlCiB;AA2C/BvD,EAAAA,eAAe,EAAE;AACfpD,IAAAA,OAAO,EAAE,CADM;AAEfD,IAAAA,IAAI,EAAE;AAFS,GA3Cc;AA+C/BsD,EAAAA,gBAAgB,EAAE;AAChBjD,IAAAA,SAAS,EAAE,QADK;AAEhBC,IAAAA,UAAU,EAAE;AAFI,GA/Ca;AAmD/BuG,EAAAA,UAAU,EAAE;AACVC,IAAAA,MAAM,EAAE;AADE,GAnDmB;AAsD/BC,EAAAA,KAAK,EAAE;AACLT,IAAAA,cAAc,EAAE,CADX;AAELU,IAAAA,gBAAgB,EAAE,EAFb;AAGLC,IAAAA,WAAW,EAAE,CAHR;AAIL7G,IAAAA,WAAW,EAAE,SAJR;AAKLmG,IAAAA,YAAY,EAAE,EALT;AAMLO,IAAAA,MAAM,EAAE;AANH,GAtDwB;AA8D/B5E,EAAAA,IAAI,EAAE;AACJU,IAAAA,eAAe,EAAE,OADb;AAEJ0D,IAAAA,cAAc,EAAE,CAFZ;AAGJU,IAAAA,gBAAgB,EAAE,EAHd;AAIJC,IAAAA,WAAW,EAAE,CAJT;AAKJ7G,IAAAA,WAAW,EAAE,SALT;AAMJmG,IAAAA,YAAY,EAAE;AANV,GA9DyB;AAsE/BW,EAAAA,IAAI,EAAE;AACJC,IAAAA,MAAM,EAAE,CADJ;AAEJ3G,IAAAA,KAAK,EAAE,MAFH;AAGJO,IAAAA,QAAQ,EAAE,EAHN;AAIJX,IAAAA,WAAW,EAAE,OAJT;AAKJC,IAAAA,SAAS,EAAE;AALP,GAtEyB;AA6E/B+G,EAAAA,IAAI,EAAE;AACJD,IAAAA,MAAM,EAAE,CADJ;AAEJ7G,IAAAA,UAAU,EAAE,KAFR;AAGJS,IAAAA,QAAQ,EAAE,EAHN;AAIJV,IAAAA,SAAS,EAAE;AAJP,GA7EyB;AAmF/BgH,EAAAA,OAAO,EAAE;AACPhH,IAAAA,SAAS,EAAE,QADJ;AAEPU,IAAAA,QAAQ,EAAE,EAFH;AAGPT,IAAAA,UAAU,EAAE;AAHL,GAnFsB;AAwF/BgH,EAAAA,QAAQ,EAAE;AACRjH,IAAAA,SAAS,EAAE,QADH;AAERU,IAAAA,QAAQ,EAAE,EAFF;AAGRP,IAAAA,KAAK,EAAE;AAHC,GAxFqB;AA6F/BiB,EAAAA,IAAI,EAAE;AACJ0F,IAAAA,MAAM,EAAE,CADJ;AAEJ9G,IAAAA,SAAS,EAAE,QAFP;AAGJU,IAAAA,QAAQ,EAAE,EAHN;AAIJP,IAAAA,KAAK,EAAE;AAJH,GA7FyB;AAmG/B+G,EAAAA,KAAK,EAAE;AACLC,IAAAA,SAAS,EAAE,CADN;AAELvH,IAAAA,OAAO,EAAE,CAFJ;AAGLsG,IAAAA,YAAY,EAAE,EAHT;AAIL3D,IAAAA,eAAe,EAAE,SAJZ;AAKL6E,IAAAA,SAAS,EAAE,QALN;AAML1G,IAAAA,QAAQ,EAAE,EANL;AAOLP,IAAAA,KAAK,EAAE;AAPF,GAnGwB;AA4G/BkH,EAAAA,SAAS,EAAE;AACT1H,IAAAA,IAAI,EAAE,CADG;AAET4C,IAAAA,eAAe,EAAE,MAFR;AAGToB,IAAAA,UAAU,EAAE;AAHH,GA5GoB;AAiH/Be,EAAAA,MAAM,EAAE;AACNf,IAAAA,UAAU,EAAE,QADN;AAENsC,IAAAA,cAAc,EAAE,EAFV;AAGNU,IAAAA,gBAAgB,EAAE,EAHZ;AAMN/G,IAAAA,OAAO,EAAC,EANF;AAON0H,IAAAA,KAAK,EAAE,KAPD;AAQNpB,IAAAA,YAAY,EAAE,EARR;AASN3D,IAAAA,eAAe,EAAE,SATX;AAUNxC,IAAAA,WAAW,EAAE;AAVP,GAjHuB;AA6H/BwH,EAAAA,QAAQ,EAAE;AACR5D,IAAAA,UAAU,EAAE,QADJ;AAER9D,IAAAA,cAAc,EAAE,QAFR;AAGRoG,IAAAA,cAAc,EAAE,EAHR;AAIRU,IAAAA,gBAAgB,EAAE,EAJV;AAOR/G,IAAAA,OAAO,EAAC,EAPA;AAQRsG,IAAAA,YAAY,EAAE,EARN;AASR3D,IAAAA,eAAe,EAAE,KATT;AAURxC,IAAAA,WAAW,EAAE;AAVL;AA7HqB,CAAlB,CAAf","sourcesContent":["import React from 'react';\r\nimport { IdContext, UserContext } from '../components/context';\r\nimport { StyleSheet, Text, View, Button, TouchableOpacity, ActivityIndicator,ScrollView, Modal } from 'react-native';\r\nimport { ApolloClient, InMemoryCache, useQuery, ApolloProvider } from \"@apollo/client\";\r\nimport { \r\n  SEE_REGIST_LECTURE,\r\n  GET_START_DATE\r\n} from '../queries';\r\nimport { useFocusEffect, useIsFocused } from '@react-navigation/native';\r\n\r\nimport {\r\n  AdMobInterstitial,\r\n} from 'expo-ads-admob';\r\n\r\nconst AD_ID = Platform.OS === 'ios'? \"ca-app-pub-8233357974153609/2214173566\" : \"ca-app-pub-8233357974153609/1707547735\"\r\nconst colors = [\r\n  \"#AFFFEE\", \"#00F5FF\", \"#FFE4E1\", \"#FFFF96\" , \"#FFDAB9\", \"#FAC6C6\", \"#82F9B7\" ,\"#FAEBD7\"\r\n]\r\nlet colorIndex = 0;\r\nlet colorMap = {};\r\ncolorMap['default'] = \"transparent\";\r\n\r\nconst NOW = new Date();\r\nconst TIMEZONE = NOW.getTimezoneOffset()*60000;\r\nconst NUM_OF_WEEKS = 16;\r\n\r\nDate.prototype.getWeek = function (dowOffset) {\r\n  /*getWeek() was developed by Nick Baicoianu at MeanFreePath: http://www.meanfreepath.com */\r\n\r\n  dowOffset = typeof(dowOffset) == 'number' ? dowOffset : 0; //default dowOffset to zero\r\n  var newYear = new Date(this.getFullYear(),0,1);\r\n  var day = newYear.getDay() - dowOffset; //the day of week the year begins on\r\n  day = (day >= 0 ? day : day + 7);\r\n  var daynum = Math.floor((this.getTime() - newYear.getTime() -\r\n    (this.getTimezoneOffset()-newYear.getTimezoneOffset())*60000)/86400000) + 1;\r\n  var weeknum;\r\n  //if the year starts before the middle of a week\r\n  if(day < 4) {\r\n    weeknum = Math.floor((daynum+day-1)/7) + 1;\r\n    if(weeknum > 52) {\r\n      let nYear = new Date(this.getFullYear() + 1,0,1);\r\n      let nday = nYear.getDay() - dowOffset;\r\n      nday = nday >= 0 ? nday : nday + 7;\r\n      /*if the next year starts before the middle of\r\n        the week, it is week #1 of that year*/\r\n      weeknum = nday < 4 ? 1 : 53;\r\n    }\r\n  }\r\n  else {\r\n    weeknum = Math.floor((daynum+day-1)/7);\r\n  }\r\n  return weeknum;\r\n};\r\n\r\nfunction get_currenet_week(START_DATE){\r\n  if(START_DATE){\r\n    const START_WEEK = START_DATE.getWeek(1);\r\n    console.log(\"START_WEEK: \", START_WEEK);\r\n    return NOW.getWeek(1)-START_WEEK;\r\n  }\r\n}\r\n\r\n// 학기 날짜 데이터 초기화\r\nlet dates = [];\r\nconst start = new Date(2020, 8, 1);\r\nconst end = new Date(2020, 11, 16);\r\nfor (let d = start; d < end; d.setDate(d.getDate() + 1)) {\r\n  dates.push(new Date(d));\r\n}\r\n\r\nfunction is_empty(obj) {\r\n  return Object.keys(obj).length === 0;\r\n}\r\n\r\nconst weekday = ['월', '화', '수', '목', '금', '토','일','VOD'];\r\n\r\n// weekly_lectures[0]: 일요일\r\n// weekly_lectures[1]: 월요일 ~ \r\n// weekly_lectures[6]: 토요일 \r\n// weekly_lectures[7]: VOD\r\n\r\n\r\nconst Weekday = ({ classes, day }) => {\r\n  //console.log(\"day in Weekday: \", day);\r\n  //console.log(\"classes in Weekday: \", classes);\r\n  if (classes.length == 0){\r\n    return(\r\n      <View style={{ flexDirection: \"row\" }}>\r\n        <View style={{\r\n          flex: 1, \r\n          padding:3, \r\n          justifyContent:\"center\",/*borderStyle:\"dashed\", borderWidth:1*/\r\n          borderBottomWidth: 0,\r\n          borderColor: \"#dcdcdc\"\r\n          }}>\r\n          <Text style={{textAlign: \"center\",fontWeight: \"600\"}}>{weekday[day]}</Text>\r\n        </View>\r\n        <View style={{\r\n          flex: 8, \r\n          padding: 5,/*borderStyle:\"dashed\", borderWidth:1*/\r\n          borderBottomWidth: 1,\r\n          borderColor: \"#dcdcdc\",\r\n          marginRight: 10,\r\n          }}>\r\n          <View>\r\n            <Text style={{color:\"#323232\",fontWeight:\"600\"}}> - </Text>\r\n          </View>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n  return (\r\n    <View style={{ flexDirection: \"row\" }}>\r\n      <View style={{\r\n        flex: 1, \r\n        padding:3 ,\r\n        justifyContent:\"center\",/*borderStyle:\"dashed\", borderWidth:1*/\r\n        borderBottomWidth: 0,\r\n        borderColor: \"#dcdcdc\"\r\n        }}>\r\n        <Text style={{textAlign: \"center\", fontWeight: \"600\"}}>{weekday[day]}</Text>\r\n      </View>\r\n      <View style={{\r\n        flex:8, \r\n        padding:5, /*borderStyle:\"dashed\", borderWidth:1*/\r\n        borderBottomWidth: 1,\r\n        borderColor: \"#dcdcdc\",\r\n        marginRight: 10,\r\n        }}>\r\n        {\r\n          classes.map((class_obj, index)=>{\r\n            return(\r\n              <View key={index} style={{flexDirection:\"row\"}}>\r\n                <View style={{\r\n                  flex: 5, /*borderStyle:\"dashed\", borderWidth:1*/\r\n                  \r\n                  }}>\r\n                  <Text style={{color:\"#323232\",fontWeight:\"600\"}}>{class_obj.name} {class_obj.type != \"VOD\"? `/ ${class_obj.room}`:null}</Text>\r\n                </View>\r\n                <View style={{flex: 3, /*borderStyle:\"dashed\", borderWidth:1,*/ justifyContent:\"center\"}}>\r\n                  {\r\n                    class_obj.type != \"VOD\"?\r\n                    <Text style={{fontSize:10,color:\"#8c8c8c\"}}>{class_obj.type} {class_obj.start_time}~{class_obj.end_time}</Text>\r\n                    :\r\n                    null\r\n                  }\r\n                </View>\r\n              </View>\r\n            )\r\n          })\r\n        }\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nfunction Weekly({ class_list }) {\r\n  const weekdays = [0,1, 2, 3, 4, 5,6,7]; // [월,화,수,목,금,토,일,VOD]\r\n  const current_week = get_currenet_week();\r\n\r\n  let weekly_classes = new Array(8);\r\n  for (let i=0; i<weekly_classes.length; i++){\r\n    weekly_classes[i] = new Array();\r\n  }\r\n\r\n  for (let i=0; i<class_list.length; i++){  \r\n    if (class_list[i].week == current_week){\r\n      let day = class_list[i].start_time.getDay()-1;\r\n      if (day == -1) day = 6; //일요일에 대한 처리\r\n      let sH = class_list[i].start_time.getHours();\r\n      let sM = class_list[i].start_time.getMinutes();\r\n      let eH = class_list[i].end_time.getHours();\r\n      let eM = class_list[i].end_time.getMinutes();\r\n      let type = class_list[i].vod? \"VOD\":\"SC\";\r\n      if (type == \"VOD\") day = 7;\r\n      let class_obj = {\r\n        name: class_list[i].name,\r\n        room: class_list[i].room,\r\n        day: day,\r\n        start_time: `${sH>=10?sH:`0${sH}`}:${sM>=10?sM:`0${sM}`}`,\r\n        end_time: `${eH>=10?eH:`0${eH}`}:${eM>=10?eM:`0${eM}`}`,\r\n        type: type\r\n      }\r\n      weekly_classes[day].push(class_obj);\r\n    }\r\n  }\r\n\r\n  //console.log(\"weekly_classes:\" ,weekly_classes);\r\n  return (\r\n    <ScrollView style={styles.card}>\r\n      {\r\n        weekdays.map((day, index) => {\r\n          return <Weekday key={index} classes={weekly_classes[day]} day={day}/>\r\n        })\r\n      }\r\n    </ScrollView>\r\n  )\r\n}\r\n\r\n\r\nfunction WeekdayClassbox({class_name}){\r\n  //console.log(\"class_name in WeekdayClassbox:\", class_name);\r\n  if (class_name){\r\n    return(\r\n      <View style={styles.classbox(class_name)}>\r\n        <Text style={styles.classboxText}>{class_name}</Text>\r\n      </View>\r\n    )\r\n  }\r\n  else{\r\n    return(\r\n      <View style={styles.classbox(\"default\")}>\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nfunction WeekendClassbox({class_names}){\r\n  //console.log(\"class_names in WeekdayClassbox:\", class_names);\r\n  const len = class_names.length;\r\n  let names = ['-','-','-'];\r\n  for(let i=0; i<len; i++){\r\n    names[i] = class_names[i];\r\n  }\r\n\r\n  return(\r\n    <View style={styles.classbox2}>\r\n      <View style={{flex:1, backgroundColor: colorMap[names[0]],/*borderStyle:\"dashed\", borderWidth:1 ,*/justifyContent:\"center\", paddingVertical:2}}>\r\n        <Text style={styles.classboxTextsmall}>{names[0]}</Text>\r\n      </View>\r\n      <View style={{flex:1, backgroundColor: colorMap[names[1]],/*borderStyle:\"dashed\", borderWidth:1 ,*/justifyContent:\"center\", paddingVertical:2}}>\r\n        <Text style={styles.classboxTextsmall}>{names[1]}</Text>\r\n      </View>\r\n      <View style={{flex:1, backgroundColor: colorMap[names[2]],/*borderStyle:\"dashed\", borderWidth:1 ,*/justifyContent:\"center\", paddingVertical:2}}>\r\n        <Text style={styles.classboxTextsmall}>{names[2]}</Text>\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\nfunction MonthlyBody({classes}){\r\n  const weekdays = [0, 1, 2, 3, 4];\r\n  const weekends = [5, 6];\r\n  let weeks = new Array(NUM_OF_WEEKS);\r\n  for(let i=0; i<weeks.length; i++) weeks[i] = i+1;\r\n\r\n  return(\r\n    <View>\r\n      {\r\n        weeks.map((week,index)=>{\r\n          return(\r\n            <View key={index} style={{flexDirection:\"row\", flex:1}}>\r\n              <View style={{flex:1, justifyContent:\"center\",borderTopWidth: 1,borderColor:\"#dcdcdc\"}}> \r\n                <Text style={{textAlign:\"center\", fontSize:10, fontWeight:\"900\"}}>{week}주차</Text>\r\n              </View>\r\n              <View style={{flexDirection:\"row\", flex:5}}>\r\n                {\r\n                  weekdays.map((day,index)=>{\r\n                    //console.log(`classes[${week}][${day}]=${classes[week][day]}`);\r\n                    return <WeekdayClassbox key={index} class_name={classes[week][day]}/>\r\n                  })\r\n                }\r\n              </View>\r\n              <View style={{flexDirection:\"row\", flex:2}}>\r\n                {\r\n                  weekends.map((day,index)=>{\r\n                    //console.log(`classes[${week}][${day}]=${classes[week][day]}`);\r\n                    return <WeekendClassbox key={index} class_names={classes[week][day]}/>\r\n                  })\r\n                }\r\n              </View>\r\n            </View>\r\n          )\r\n        })\r\n      }\r\n    </View>\r\n  )\r\n}\r\n\r\nfunction MonthlyHeader() {\r\n  return (\r\n    <View style={styles.weeklyHeader}>\r\n      <View style={styles.weeklyHeaderBox}>\r\n        <Text style={{textAlign: \"center\",fontWeight: \"700\", fontSize:12}}></Text>\r\n      </View>\r\n      <View style={styles.weeklyHeaderBox}>\r\n        <Text style={styles.weeklyHeaderText}>월</Text>\r\n      </View>\r\n      <View style={styles.weeklyHeaderBox}>\r\n        <Text style={styles.weeklyHeaderText}>화</Text>\r\n      </View>\r\n      <View style={styles.weeklyHeaderBox}>\r\n        <Text style={styles.weeklyHeaderText}>수</Text>\r\n      </View >\r\n      <View style={styles.weeklyHeaderBox}>\r\n        <Text style={styles.weeklyHeaderText}>목</Text>\r\n      </View>\r\n      <View style={styles.weeklyHeaderBox}>\r\n        <Text style={styles.weeklyHeaderText}>금</Text>\r\n      </View>\r\n      <View style={styles.weeklyHeaderBox}>\r\n        <Text style={styles.weeklyHeaderText}>토</Text>\r\n      </View>\r\n      <View style={styles.weeklyHeaderBox}>\r\n        <Text style={styles.weeklyHeaderText}>일</Text>\r\n      </View>\r\n    </View>\r\n  )\r\n}\r\n\r\nfunction Monthly({class_list}){\r\n  //console.log(\"class_list in Monthly: \", class_list);\r\n\r\n  let classes = new Array(NUM_OF_WEEKS+1);\r\n  for (let i=0; i<classes.length; i++){\r\n    classes[i] = [false, false, false, false, false, [],[]]; // 주말은 배열로 관리 \r\n  }\r\n\r\n  for (let i=0; i<class_list.length; i++){  \r\n    let week = class_list[i].week;\r\n    let day = class_list[i].start_time.getDay()-1;\r\n    if (day == -1) day = 6; //일요일에 대한 처리\r\n    let type = class_list[i].vod? \"VOD\":\"SC\";\r\n    if (type == \"VOD\") continue;\r\n\r\n    if (day<5) classes[week][day]=class_list[i].name;\r\n    else classes[week][day].push(class_list[i].name);\r\n  }\r\n\r\n  //console.log(\"classes in Montly: \", classes);\r\n\r\n  return(\r\n    <ScrollView \r\n      stickyHeaderIndices={[0]} \r\n      style={styles.card}\r\n    >\r\n      <MonthlyHeader />\r\n      <MonthlyBody classes={classes}/>\r\n    </ScrollView>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction Main({navigation, START_DATE}) {\r\n  console.log(\"Main(ScheduleScreen) rendering\");\r\n  const user_meta = React.useContext(IdContext);\r\n  //const [showAD, setShowAD] = React.useState(true);\r\n\r\n\r\n  // 5초 전면 광고 \r\n\r\n  // 시간표 데이터 Fetch & 전처리\r\n  const { loading, error, data, refetch } = useQuery(SEE_REGIST_LECTURE);\r\n\r\n  //console.log(\"loading: \",loading);\r\n  //console.log(\"data   : \" , data);\r\n  //console.log(\"error  : \", error );\r\n\r\n  if(loading){\r\n    console.log(\"loading...\");\r\n    return (\r\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n        <ActivityIndicator size=\"large\" color=\"#1478FF\"/>\r\n      </View>\r\n    )    \r\n  }\r\n  if(data){\r\n    // 데이터 전처리. \r\n    let lectures = data.seeRegistLecture;\r\n    console.log(\"lectures.length: \", lectures.length);\r\n    let class_list = [];\r\n    colorIndex=0;\r\n    for(let i=0; i<lectures.length; i++){\r\n      // 색깔값 지정 \r\n      colorMap[lectures[i].name] = colors[colorIndex++];\r\n      let num_of_classes = lectures[i].classes.length;\r\n      for(let j=0; j<num_of_classes; j++){\r\n        let start_time = new Date(Number(lectures[i].classes[j].startTime)+TIMEZONE);\r\n        let end_time = new Date(Number(lectures[i].classes[j].endTime)+TIMEZONE);\r\n        let class_obj = {\r\n          name: lectures[i].name,\r\n          room: lectures[i].room,\r\n          start_time: start_time,\r\n          end_time: end_time,\r\n          week: lectures[i].classes[j].week,\r\n          vod: lectures[i].classes[j].VOD\r\n        }\r\n        class_list.push(class_obj);\r\n      }\r\n    }\r\n    // 수업을 빠른 시간순으로 정렬 \r\n    class_list.sort((a,b)=>{\r\n      return a.start_time.getTime() - b.start_time.getTime();\r\n    })\r\n    //console.log(class_list);\r\n    const WEEK = get_currenet_week(new Date(START_DATE));\r\n    console.log(\"WEEK: \", WEEK);\r\n    return (\r\n      <View style={{flex:1, justifyContent: \"center\"}}>\r\n        {/*                                              이전 배너형 광고(삭제)\r\n          user_meta.grade>1?\r\n          <Modal\r\n            animationType=\"slide\"\r\n            transparent={true}\r\n            visible={showAD}\r\n            onRequestClose={() => {\r\n              Alert.alert('Modal has been closed.');\r\n            }}>\r\n            <View style={{justifyContent:\"center\", flex:1}}>\r\n              <AdMobBanner\r\n                style={styles.adcard}\r\n                bannerSize=\"mediumRectangle\"\r\n                adUnitID=\"ca-app-pub-8233357974153609/8459668669\" // Test ID, Replace with your-admob-unit-id\r\n                servePersonalizedAds // true or false\r\n                onDidFailToReceiveAdWithError={this.bannerError} \r\n              />\r\n              <TouchableOpacity style={styles.adButton} onPress={()=>{\r\n                setShowAD(false);\r\n              }}><Text style={{fontSize:20, color:\"white\"}}>닫기</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </Modal>\r\n          :\r\n          null*/\r\n        }\r\n        <View style={{flex:5}}>\r\n          <Text style={{ textAlign: \"left\", paddingLeft: 30, fontWeight: \"700\", paddingTop: 10 }}>금주 수업 {WEEK<0? 0:WEEK}주차</Text>\r\n          <Weekly class_list={class_list} />\r\n        </View>\r\n        <View style={{flex:5}}>\r\n          <Text style={{ textAlign: \"left\", paddingLeft: 30, fontWeight: \"700\", paddingTop: 10 }}>전체 시간표</Text>\r\n          <Monthly class_list={class_list}/>\r\n        </View>\r\n        <View style={{flex:2, flexDirection: \"row\", alignItems: \"center\", justifyContent:\"center\"}}>\r\n          <TouchableOpacity style={styles.button} onPress={()=>navigation.navigate('RegisterLectureScreen')}>\r\n            <Text style={{fontSize:20, color:\"white\"}}>시간표 추가</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity style={styles.button} onPress={()=>navigation.navigate('EditLectureScreen')}>\r\n            <Text style={{fontSize:20, color:\"white\"}}>시간표 편집</Text>\r\n          </TouchableOpacity>\r\n        </View> \r\n      </View>\r\n    );\r\n  }\r\n  useFocusEffect(React.useCallback(()=>{\r\n    // 이곳에서 refetch\r\n    alert('SCREEN IS FOCUSED');\r\n    return()=>{\r\n      alert(\"SCREEN WAS UNFOCUSED\");\r\n    }\r\n  },[])\r\n  );\r\n}\r\n\r\nexport default function ScheduleScreen({navigation}) {\r\n  console.log(\"ScheduleScreen\");\r\n  const isFocused = useIsFocused();\r\n  const user_info = React.useContext(UserContext);\r\n  const user_meta = React.useContext(IdContext);\r\n  const client = new ApolloClient({\r\n    uri: \"http://52.251.50.212:4000/\",\r\n    cache: new InMemoryCache(),\r\n    headers: {\r\n      Authorization: `Bearer ${user_info.token}`\r\n    }\r\n  });\r\n\r\n  const { loading, error, data} = useQuery(GET_START_DATE);\r\n\r\n  if(loading){\r\n    console.log(\"loading...\");\r\n    return (\r\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n        <ActivityIndicator size=\"large\" color=\"#1478FF\"/>\r\n      </View>\r\n    )   \r\n  }\r\n  if(data){\r\n    const START_DATE = Number(data.getStartDate.startDate)\r\n    console.log(\"START_DATE: \",START_DATE);\r\n    if(isFocused){\r\n      // 시간표 탭에 돌아올 때마다 5초 전면 광고 \r\n      if(user_meta.grade >= 2){  // 유저 등급이 0,1이 아니라면 발생     \r\n        AdMobInterstitial.setAdUnitID(AD_ID).then(()=>{\r\n          AdMobInterstitial.requestAdAsync().then(()=>AdMobInterstitial.showAdAsync());\r\n        });\r\n      }\r\n      colorIndex=0;\r\n      return (\r\n        <ApolloProvider client={client}>\r\n          <Main navigation={navigation} START_DATE={START_DATE}/>\r\n        </ApolloProvider>\r\n      )\r\n    }\r\n    else{\r\n      return <View></View>\r\n    }\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  adcard:{\r\n    marginVertical: 5,\r\n    borderRadius: 10,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  classboxText:{\r\n    textAlign: \"center\",\r\n    fontSize: 11,\r\n  },\r\n  classboxTextsmall:{\r\n    textAlign: \"center\",\r\n    fontSize: 6,\r\n  },\r\n  classbox: name => ({\r\n    paddingHorizontal: 3,\r\n    paddingVertical: 5,\r\n    justifyContent: \"center\",\r\n    //borderStyle: \"dashed\",\r\n    borderLeftWidth: 1,\r\n    borderTopWidth: 1,\r\n    borderColor: \"#dcdcdc\",\r\n    backgroundColor: colorMap[name],\r\n    flex: 1\r\n  }),\r\n  classbox2:{\r\n    justifyContent: \"center\",\r\n    //borderStyle: \"dashed\",\r\n    borderLeftWidth: 1,\r\n    borderTopWidth: 1,\r\n    borderColor: \"#dcdcdc\",\r\n    flex: 1\r\n  },\r\n  weeklyHeader: {\r\n    backgroundColor: \"white\",\r\n    flexDirection: 'row',\r\n    //borderStyle: \"dashed\",\r\n    //borderWidth: 1,\r\n    borderTopLeftRadius: 10,\r\n    borderTopRightRadius: 10,\r\n    borderBottomColor: \"#dcdcdc\"\r\n  },\r\n  weeklyHeaderBox: {\r\n    padding: 9,\r\n    flex: 1\r\n  },\r\n  weeklyHeaderText: {\r\n    textAlign: \"center\",\r\n    fontWeight: \"700\"\r\n  },\r\n  scrollView: {\r\n    height: 200\r\n  },\r\n  card2: {\r\n    marginVertical: 5,\r\n    marginHorizontal: 25,\r\n    borderWidth: 1,\r\n    borderColor: \"#dcdcdc\",\r\n    borderRadius: 10,\r\n    height: \"40%\"\r\n  },\r\n  card: {\r\n    backgroundColor: \"white\",\r\n    marginVertical: 5,\r\n    marginHorizontal: 25,\r\n    borderWidth: 1,\r\n    borderColor: \"#dcdcdc\",\r\n    borderRadius: 10,\r\n  },\r\n  date: {\r\n    margin: 5,\r\n    color: \"blue\",\r\n    fontSize: 15,\r\n    borderColor: \"black\",\r\n    textAlign: \"center\",\r\n  },\r\n  time: {\r\n    margin: 5,\r\n    fontWeight: \"600\",\r\n    fontSize: 20,\r\n    textAlign: \"center\",\r\n  },\r\n  subject: {\r\n    textAlign: \"center\",\r\n    fontSize: 30,\r\n    fontWeight: \"600\",\r\n  },\r\n  location: {\r\n    textAlign: \"center\",\r\n    fontSize: 10,\r\n    color: \"#646464\",\r\n  },\r\n  week: {\r\n    margin: 5,\r\n    textAlign: \"center\",\r\n    fontSize: 10,\r\n    color: \"#646464\",\r\n  },\r\n  where: {\r\n    marginTop: 7,\r\n    padding: 3,\r\n    borderRadius: 10,\r\n    backgroundColor: \"#dcdcdc\",\r\n    alignSelf: \"center\",\r\n    fontSize: 10,\r\n    color: \"grey\",\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n  },\r\n  button: {\r\n    alignItems: 'center',\r\n    marginVertical: 10,\r\n    marginHorizontal: 10,\r\n    //borderStyle:\"dashed\", \r\n    //borderWidth:1,\r\n    padding:10,\r\n    width: \"40%\",\r\n    borderRadius: 10,\r\n    backgroundColor: \"#1478FF\",\r\n    borderColor: \"white\"\r\n},\r\n  adButton: {\r\n    alignItems: 'center',\r\n    justifyContent: \"center\",\r\n    marginVertical: 10,\r\n    marginHorizontal: 50,\r\n    //borderStyle:\"dashed\", \r\n    //borderWidth:1,\r\n    padding:10,\r\n    borderRadius: 10,\r\n    backgroundColor: \"red\",\r\n    borderColor: \"white\"\r\n  },\r\n});"]},"metadata":{},"sourceType":"module"}